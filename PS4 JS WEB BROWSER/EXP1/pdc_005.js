/*!
 * @sie/designkit
 *
 * @version       1.0.6 - Tue, 16 Nov 2021 07:11:09 GMT (release-nov_16--hotfix)
 * @license       UNLICENSED
 * @copyright     2021 Sony Interactive Entertainment LLC, all rights reserved
 */

!function(){"use strict";var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),a=function(){function a(){e(this,a),this.$els={win:_gpdc.elements.$window,htmlBody:$("html, body"),dkNav:$("#sony-bar.dk-nav__wrapper"),nav:$("#shared-nav-root #shared-nav-container"),tertiary:$("#jetstream-tertiary-nav .tertiary-container")},this.EVENT_CHANGE="hashchange.dkHashAnchor",this.EVENT_LOAD="load.dkHashAnchor",this.EVENT_CLICK="click.dkHashAnchor"}return t(a,[{key:"bind",value:function(){this.onHashChange=this.onHashChange.bind(this),this.onHashAnchorClick=this.onHashAnchorClick.bind(this)}},{key:"init",value:function(){var e=this;this.$els.win.on(this.EVENT_CHANGE,this.onHashChange),"complete"===document.readyState?this.$els.win.trigger(this.EVENT_CHANGE):this.$els.win.on(this.EVENT_LOAD,function(){return e.$els.win.trigger(e.EVENT_CHANGE)});var t='a[href^="#"]';$("#gdk__content "+t).on(this.EVENT_CLICK,this.onHashAnchorClick),this.$els.tertiary.on(this.EVENT_CLICK,t,this.onHashAnchorClick),_gpdc.Logger.log("Hash Anchor Plugin initialized!!")}},{key:"onHashAnchorClick",value:function(e){var t=$(e.currentTarget).attr("href")||"";location.href.includes(t)&&t.length>1&&this.scrollToElementByHash(t)}},{key:"onHashChange",value:function(e){var t=window.location.hash;if(t)return t.includes("?")?void this.sanitizeHashUrl(t):void this.scrollToElementByHash(t)}},{key:"scrollToElementByHash",value:function(e){var t=$(e+', [name="'+e.substring(1)+'"]').first();if(t.length){var a=t.offset().top;location.href.includes(e)&&this.$els.htmlBody.scrollTop(a),this.$els.htmlBody.animate({scrollTop:a-this.calculateNavigationOffset()})}}},{key:"calculateNavigationOffset",value:function(){var e=0;return this.$els.dkNav.length&&(e+=this.$els.dkNav.outerHeight()),this.$els.nav.length&&(e+=this.$els.nav.outerHeight()),this.$els.tertiary.length&&(e+=this.$els.tertiary.outerHeight()),e}},{key:"sanitizeHashUrl",value:function(e){var t=e.split("?");if(t){var a=""+location.origin+location.pathname;window.location.replace(a+"?"+(t[1]||"")+(t[0]||""))}}}]),a}(),i={LABELS:{EU_COOKIE:"eucookiepreference",PREFERENCE_ACCEPT:"accept",PREFERENCE_REJECT:"reject"},DOMAIN:".playstation.com",COOKIE_AGE:3650,UH:"userinfo",ORACLE:{e1:"isSignedIn_e",np:"isSignedIn",mgmt:"isSignedIn_m"},PLUS:"p"},n={PROD:/(www|wwwglobal|author)\.playstation\.com/i,STAGE:/(author\.stage|stage)\.playstation\.com/i,PREVIEW:/preview\.www\.playstation\.com/i,WWWGLOBAL:/wwwglobal\.playstation\.com/i},o={navFooter:"navFooter",userState:"userState",gpdcUser:"gpdcUser"},s={IS_PORTRAIT:(window.matchMedia&&matchMedia("(orientation: portrait)")||{}).matches,IS_LANDSCAPE:(window.matchMedia&&matchMedia("(orientation: landscape)")||{}).matches,IS_MOBILE:(window.matchMedia&&matchMedia("(max-width: 767px)")||{}).matches,IS_MOBILE_PORTRAIT:(window.matchMedia("(max-width: 767px) and (orientation: portrait)")||{}).matches,IS_TABLET:(window.matchMedia&&matchMedia("(min-width: 768px)")||{}).matches,IS_DESKTOP:(window.matchMedia&&matchMedia("(min-width: 1024px)")||{}).matches},r={IS_PORTRAIT:(window.matchMedia&&matchMedia("(orientation: portrait)")||{}).matches,IS_LANDSCAPE:(window.matchMedia&&matchMedia("(orientation: landscape)")||{}).matches,IS_JETSTREAM_MOBILE:(window.matchMedia&&matchMedia("(max-width: 699px)")||{}).matches,IS_MOBILE:(window.matchMedia&&matchMedia("(max-width: 767px)")||{}).matches,IS_MOBILE_PORTRAIT:(window.matchMedia("(max-width: 767px) and (orientation: portrait)")||{}).matches,IS_TABLET:(window.matchMedia&&matchMedia("(min-width: 768px)")||{}).matches,IS_TABLET_LG:(window.matchMedia&&matchMedia("(min-width: 1024px)")||{}).matches,IS_LAPTOP:(window.matchMedia&&matchMedia("(min-width: 1367px)")||{}).matches,IS_DESKTOP:(window.matchMedia&&matchMedia("(min-width: 1920px)")||{}).matches},l={EMPTY_LABEL:"empty"},d=function(){function a(){e(this,a),this.init()}return t(a,[{key:"getRootMargin",value:function(){var e={mobile:30,desktop:20,default:200},t=s.IS_MOBILE?e.mobile:null,a=s.IS_DESKTOP?e.mobile:e.desktop,i=Math.round(window.innerHeight*(t||a)/100)||e.default;return(isNaN(i)||i<e.default?e.default:i)+"px"}},{key:"init",value:function(){if(window.lozad){var e=lozad(".lozad",{rootMargin:this.getRootMargin(),threshold:0,loaded:function(e){e.classList.add("lazy-loaded")}});e.observe(),_gpdc.components.lozad={_observer:e}}_gpdc.Logger.log("Lozad class initialized!!")}}]),a}(),c=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:180,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".playstation.com";if(t){var n=new Date;n.setTime(n.getTime()+60*a*1e3),document.cookie=e+"="+encodeURIComponent(t)+"; expires="+n.toUTCString()+";path=/; domain="+i+";secure"}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return t?decodeURIComponent(t[2]):null},g=function(e){e&&(document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;")},h=function(e){var t=null;try{t=JSON.parse(e)}catch(e){}return t},p={INPUTS_RESERVED_KEY_CODES:[8,9,16,37,38,39,40],INLINE_VIDEO_WAIT:500,DTM_IGNORE_EVENT:"ignore-dtm-click-event",COMPONENT_INSTANCE_ID_ATTR:"uuid"},v={EMBED_URL:"https://www.youtube.com/embed/"},f={endpoint:_gpdc.elements.$body.data("wc-api"),arkhamAPIHost:_gpdc.elements.$body.data("arkham-api"),arkhamAPIPath:"/api/session/v1/signin?redirect_uri=CURRENT_PAGE_URL&flow=web:walletAdmin",loadingClass:"loading",loadedAction:"checkout_app_visible",loginAction:"checkout_signin_required",pswrdVerifAction:"checkout_password_verification_required",closeActions:["checkout_cart_cancel","checkout_continue_shopping","checkout_error_dismiss","checkout_thankyou_dismiss"]},m={btnBlock:".btn-block",btnBlockGated:".btn-block [data-age-gated]",btnBlockGatedForce:".btn-block [data-force-age-gate]",btnLinkSelector:'.btn-block [class^="cta__"]:not(.cta__inner), .btn-block .text-link',btnVideoSelector:".btn-block [data-video-dam], .btn-block [data-video-youtube]",btnAgeGateSelector:".btn-block .age-gate__input-btn",oldStoreUrl:"store.sonyentertainmentnetwork",newStoreUrl:"store.playstation",pdcDirectUrl:"direct.playstation",consoleUrlPrefix:{product:"psns:browse?product=",category:"psns:browse?category="}},k={pictureTag:{lower:'<source srcset="IMG_SRC_DESKTOP?$400pxDESKTOP_TRANSPARENT" media="(min-width: 768px)">\n                    <source srcset="IMG_SRC_MOBILE?$200pxMOBILE_TRANSPARENT" media="(min-width: 100px)">\n                    <img src="IMG_SRC_DESKTOP?$100pxDESKTOP_TRANSPARENT">',main:'<source srcset="IMG_SRC_DESKTOP?$1600pxDESKTOP_TRANSPARENT" media="(min-width: 1024px)">\n                    <source srcset="IMG_SRC_DESKTOP?$1200pxDESKTOP_TRANSPARENT" media="(min-width: 768px)">\n                    <source srcset="IMG_SRC_MOBILE?$800pxMOBILE_TRANSPARENT" media="(min-width: 100px)">\n                    <img src="IMG_SRC_DESKTOP?$100pxDESKTOP_TRANSPARENT">',fullscreen:'<source srcset="IMG_SRC_DESKTOP?$4000pxDESKTOP_TRANSPARENT" media="(min-width: 3000px)">\n                    <source srcset="IMG_SRC_DESKTOP?$2400pxDESKTOP_TRANSPARENT" media="(min-width: 1367px)">\n                    <source srcset="IMG_SRC_DESKTOP?$1600pxDESKTOP_TRANSPARENT" media="(min-width: 1024px)">\n                    <source srcset="IMG_SRC_DESKTOP?$1200pxDESKTOP_TRANSPARENT" media="(min-width: 768px)">\n                    <source srcset="IMG_SRC_MOBILE?$800pxMOBILE_TRANSPARENT" media="(min-width: 100px)">\n                    <img src="IMG_SRC_DESKTOP?$100pxDESKTOP_TRANSPARENT">'}},_={COOKIE_NAME:"gpdc_gated",TYPE_TEMPLATE_ID_MAP:{SIGN_IN:"#age-gate__user-sign-in-required",DOB:"#age-gate__user-input-required",SHALL_NOT_PASS:"#age-gate__user-shall-not-pass"},CONTENT:"#gdk__content .cmp-container",FIELDS:{y:".year",m:".month",d:".day"}},b=function(){function i(){e(this,i),this.hashAnchor=new a}return t(i,[{key:"save",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.COMPONENT_INSTANCE_ID_ATTR,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e&&(sessionStorage.setItem(o.userState,JSON.stringify({idAttr:t,value:e,cellIndex:a})),_gpdc.Logger.log("User State has been saved in sessionStorage for element with id: "+e))}},{key:"clear",value:function(){sessionStorage.removeItem(o.userState)}},{key:"retrieve",value:function(){var e=this,t=sessionStorage.getItem(o.userState);if(t){var a=h(t)||{},i=a.idAttr,n=a.value,s=a.cellIndex,r=void 0===s?null:s;if(sessionStorage.removeItem(o.userState),_gpdc.user&&_gpdc.user.isLoggedIn&&i&&n){var l=$("[data-"+i+'="'+n+'"]');l.length&&(l.data(p.DTM_IGNORE_EVENT,!0),setTimeout(function(){e.hashAnchor.$els.htmlBody.animate({scrollTop:l.offset().top-e.hashAnchor.calculateNavigationOffset()},0),r>=0&&l.data("carousel")?e.selectCarouselElement(l,r):l.data("pxp-action")?e.handleExpWidgetReopen(l):l.get(0).click()},200))}}}},{key:"selectCarouselElement",value:function(e,t){if("image-gallery"===e.data("component")){var a=e.find('[data-component="image-block"]:eq('+t+")").get(0);return void(a&&a.click())}var i=(e.data("flickity")||{}).cells,n=i&&i[t]?$(i[t].element):null;n.length&&(e.find(".carousel-cell.is-selected").removeClass("is-selected"),n.addClass("is-selected").trigger($.Event("keydown",{key:"Enter",keyCode:13,preventDefault:function(){}})))}},{key:"handleExpWidgetReopen",value:function(e){window.PSEXP&&PSEXP.isClickReady?e.get(0).click():document.addEventListener("psexp-click-ready",function(t){return e.get(0).click()},!1)}}]),i}(),y="no-scroll",C="curtain",E="curtain__blur",A=function(e,t){var a="addClass"===e?"on":"off";$("html, body")[e](y),t[a]("touchmove.dkUtilsLockScreen",function(e){return e.preventDefault(),e.stopPropagation(),!1})},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dark";!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Promise(function(i,n){var o=$("."+C),s=[a,"opacity--"+t];o.length||(o=$('<div class="'+C+'" />'),$("#gdk__content").append(o)),o[0].$wrapper||(o[0].$wrapper=$(".cmp-container")),e?(o.removeClass("display--hidden"),setTimeout(function(){o.addClass(s)},10),setTimeout(function(){o[0].$wrapper.addClass(E)},250)):(o[0].$wrapper.removeClass(E),o.removeClass(s),setTimeout(function(){o.attr("class",C+" display--hidden")},250)),A(e?"addClass":"removeClass",o),i()})},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#gdk__content",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(i,n){var o=($(e).html()||"").trim();if(o){if(a){var s=$($.parseHTML(o)).addClass(e.replace(/^#+/,""));$(t).append(s)}else $(t).append($.parseHTML(o));i("success")}else n("failure")})},I=function(e){var t=$(e);t.length&&t.html("")},x=function(e){if(!e||"false"===e)return null;if(e.startsWith("#"))return e;var t=/^rgba\(/.test(e);e=e.substring(t?5:4).split(")")[0].split(e.indexOf(",")>-1?",":" ");var a=(+e[0]).toString(16),i=(+e[1]).toString(16),n=(+e[2]).toString(16);if(a=1==a.length?"0"+a:a,i=1==i.length?"0"+i:i,n=1==n.length?"0"+n:n,!t)return"#"+a+i+n;var o=Math.round(255*+e[3]).toString(16);return o=1==o.length?"0"+o:o,"#"+a+i+n+o},L=function(e){var t=e.length>7;return(t?e.substring(0,7):e)+"00"},S=function(e,t,a,i,n,o){var s=e.data(t)||"";if(s){var r={};s=x(s),i&&(r={"--gradient-start-color":s,"--gradient-end-color":L(s)}),n&&(r["--gradient-start-color-tablet"]=s,r["--gradient-end-color-tablet"]=L(s)),o&&(r["--gradient-start-color-desktop"]=s,r["--gradient-end-color-desktop"]=L(s)),a&&(r[a]=s),e.css(r)}},P=function(){function a(){e(this,a);var t=new Date;this.IGNORE_RATING_CLASS="ignore-rating",this.RATED_VIDEO_NOT_SELECTOR=':not([data-component="video-block"])',this.userState=new b,this.isMatureRatedPage=_gpdc.elements.$body.data("rated-mature"),this.ageGateType=_gpdc.elements.$body.data("age-gate-type"),this.ageThreshold=parseInt(_gpdc.elements.$body.data("age-threshold")||"17",10),this.cookieTimeout=parseInt(_gpdc.elements.$body.data("cookie-timeout")||"120",10),this.isAutoTriggered=_gpdc.elements.$body.data("auto-trigger-gated-page"),this.isAdvancedAgeGate=_gpdc.elements.$body.data("advanced-age-gate"),this.ratingAgeThreshold=this.isAdvancedAgeGate?parseInt(_gpdc.elements.$body.data("rating-age-threshold")||this.ageThreshold,10):this.ageThreshold,this.ratingAgeLessThanAgeThreshold=this.ratingAgeThreshold<this.ageThreshold,this.loggedInUser=_gpdc.user&&_gpdc.user.isLoggedIn?_gpdc.user:null,this.usersAge=0,this.$ageGate=null,this.$ageGateVideo=null,this.lastElementTabIndex=2,this.$triggerElement=null,this.formValidations={year:{regx:/^\d{4}$/,min:1869,max:t.getFullYear()},month:{regx:/^\d{1,2}$/,min:1,max:12,currentMonth:t.getMonth()+1},day:{regx:/^\d{1,2}$/,min:1,max:31,currentDay:t.getDate()}}}return t(a,[{key:"getAgeGateElement",value:function(){return this.isAdvancedAgeGate&&"video-block"===this.triggerComponent?this.$ageGateVideo:this.$ageGate}},{key:"checkAgeGateStatus",value:function(e){this.loggedInUser&&this.loggedInUser.isMature||this.usersAge>=this.ageThreshold?this.setAgeGateSuccess(e,!1):this.isAdvancedAgeGate&&this.usersAge>=this.ratingAgeThreshold&&this.setAgeGateSuccess(e,!0)}},{key:"setAgeGateSuccess",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return $('[data-component="video-block"][data-age-gated="true"]').attr("data-age-gated",!1).data("age-gated",!1),void $('[data-component="video-block"][data-force-age-gate="true"]').attr("data-force-age-gate",!1).data("force-age-gate",!1);var a='[data-component="image-block"][data-age-gated]:not([data-lightbox="true"])';this.isAutoTriggered&&_gpdc.elements.$body.attr("data-auto-trigger-gated-page",!1),this.isMatureRatedPage&&(_gpdc.elements.$body.addClass(this.IGNORE_RATING_CLASS),_gpdc.elements.$body.attr("data-rated-mature",!1).data("rated-mature",!1));var i=this.isAdvancedAgeGate&&this.usersAge<this.ratingAgeThreshold?this.RATED_VIDEO_NOT_SELECTOR:"";$('[data-age-gated="true"]'+i).attr("data-age-gated",!1).data("age-gated",!1),$('[data-force-age-gate="true"]'+i).attr("data-force-age-gate",!1).data("force-age-gate",!1),$(a+'[href="javascript:void(0);"]').attr("tabindex",-1),e||this.userState.clear()}},{key:"updateSignInLink",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".age-gate",t=$(e+' [data-sign-in-link="true"]');t.length&&t.on("click.dkSignIn",window._gpdc.config.doSignIn)}},{key:"logAgeGateDtmEvent",value:function(e,t,a,i){_gpdc.analytics.event.addGDLEvent("click",t,{moduleName:"age-gate",elementType:i,assetName:l.EMPTY_LABEL,linkUrl:l.EMPTY_LABEL,label:a,userActionFlag:!1,position:1},e)}},{key:"toggleSubmitBtnState",value:function(e){var t=this.getAgeGateElement().find(".age-gate__input-btn");e?(t.attr("aria-disabled","true"),t.addClass("cta__disabled")):(t.attr("aria-disabled","false"),t.removeClass("cta__disabled"))}},{key:"getUsersAgeInYears",value:function(e,t,a){var i=new Date,n=new Date(e,t,a),o=i.getMonth()-n.getMonth(),s=i.getFullYear()-n.getFullYear();return(o<0||0===o&&i.getDate()<n.getDate())&&s--,s}},{key:"toggleFormValidityState",value:function(){var e=this.getAgeGateElement(),t=e.find("#age-gate-day"),a=e.find("#age-gate-month"),i=e.find("#age-gate-year"),n=$(".age-gate__error-notice"),o=[t.attr("aria-invalid"),a.attr("aria-invalid"),i.attr("aria-invalid")];o.includes("true")?(this.toggleSubmitBtnState(!0),n.removeClass("visibility--hidden")):(this.toggleSubmitBtnState(!1),n.addClass("visibility--hidden")),t.val()&&a.val()&&i.val()||this.toggleSubmitBtnState(!0)}},{key:"validateInputField",value:function(e,t,a){var i=this.formValidations[t],n=this.getAgeGateElement(),o=n.find("#age-gate-month"),s=n.find("#age-gate-year"),r=!0,l=void 0,d=void 0,c=void 0,u=void 0,g=void 0,h=void 0;if(r=""===a||i.regx.test(a)&&a>=i.min&&a<=i.max,"year"!==t&&(l=parseInt(s.val()||"0",10),d=parseInt(o.val()||"0",10),u=l===this.formValidations.year.max,c="true"==s.attr("aria-invalid"),g="true"==o.attr("aria-invalid")),!r)return r;if("month"!==t||c||(r=u?a<=i.currentMonth:r),"day"===t&&!c&&!g){var p=d===this.formValidations.month.currentMonth;h=new Date(l,d,0).getDate(),h=u&&p?i.currentDay:h,r=!a||a<=h}return r}},{key:"ageGateClose",value:function(e,t,a){var i=this,n=this.getAgeGateElement(),o=n.find(".age-gate__input-btn");T(!1).then(function(s){n.addClass("display--hidden"),"DOB"===i.ageGateType&&($.each(n.find(".age-gate__input-field"),function(e,t){var a=$(t);a.val("").removeClass("dirty").attr("aria-invalid",!1),a.closest("label").removeClass("hasError")}),n.find(".age-gate__error-notice").addClass("visibility--hidden"),o.off("click.psAgeGate")),e.off(t),i.ageGateAccessibilityUtils("off"),null!==a&&a()})}},{key:"defineAgeGateEscape",value:function(e){var t=this,a=this.getAgeGateElement(),i=a.find(".text-link"),n=a.find(".age-gate__close");if(this.isAutoTriggered){i.removeClass("display--hidden"),n.remove();var o=!1;try{var s=new URL(document.referrer);o=s.origin===location.origin}catch(e){o=(document.referrer||"").startsWith(location.origin)}return void(o&&i.on("click.psAgeGateBack",function(e){e.preventDefault(),i.attr("href",document.referrer),window.history.back(-1)}))}i.remove(),n.removeClass("display--hidden"),n.on("click.psAgeGate",function(a){return t.ageGateClose(n,"click.psAgeGate",e)}),_gpdc.elements.$document.on("keyup.psAgeGate",function(a){"Escape"!==a.key&&"Esc"!==a.key&&27!==a.keyCode||(a.stopPropagation(),t.ageGateClose(_gpdc.elements.$document,"keyup.psAgeGate",e))})}},{key:"showAccessDenied",value:function(){var e=this;this.isAutoTriggered&&I(_.CONTENT);var t=this.getCorrectAgeGateElm(".age-gate.user-shall-not-pass"),a=t.ageGateElmVar,i=t.ageGateElmRef;this[a]=i,T(!0).then(function(t){e[a]&&e[a].length?(e.defineAgeGateEscape(null),e[a].removeClass("display--hidden")):w(_.TYPE_TEMPLATE_ID_MAP.SHALL_NOT_PASS).then(function(t){var a=e.getCorrectAgeGateElm(".age-gate.user-shall-not-pass",!0),i=a.ageGateElmVar,n=a.ageGateElmRef;e[i]=n,e.applyTabOrder("ACCESS_DENIED"),e.defineAgeGateEscape(null)}).catch(function(){return _gpdc.Logger.warn("Unable to find Age Gate Shall Not Pass HTML Template!!")})}).then(function(t){e.ageGateAccessibilityUtils("on")})}},{key:"attachInputFieldEventHandler",value:function(e,t){var a=this;e.on("keyup.psAgeGate blur.psAgeGate",function(i){var n=i.which||i.keyCode,o=e.val(),s=o.length,r=parseInt(e.attr("minlength")),l=parseInt(e.attr("maxlength")),d=e.attr("name"),c=0,u=!1,g=void 0;e.addClass("dirty");var h=a.getAgeGateElement().find("#age-gate-day");(s>=r||"blur"==i.type||!o&&e.hasClass("dirty"))&&(c=parseInt(o.substring(0,l),10),c=isNaN(c)?"":c,e.val(c),u=a.validateInputField(e,d,c),e.attr("aria-invalid",!u),e.closest("label")[(u?"remove":"add")+"Class"]("hasError"),"day"!=d&&h.hasClass("dirty")&&(g=a.validateInputField(h,"day",h.val()),h.attr("aria-invalid",!g),h.closest("label")[(g?"remove":"add")+"Class"]("hasError")),u&&o&&s>=l&&n&&p.INPUTS_RESERVED_KEY_CODES.indexOf(n)===-1&&t.focus()),o||e.removeClass("dirty"),a.toggleFormValidityState()})}},{key:"attachSubmitBtnLogic",value:function(){var e=this;return new Promise(function(t,a){var i=e.getAgeGateElement(),n=i.find(".age-gate__input-btn");n.on("click.psAgeGate",function(o){if(o.preventDefault(),o.stopPropagation(),!n.hasClass("cta__disabled")){var s=i.find("#age-gate-day").val(),r=i.find("#age-gate-year").val(),l=i.find("#age-gate-month").val();l=parseInt(l||"1",10)-1,e.usersAge=e.getUsersAgeInYears(r,l,s);var d=e.isAdvancedAgeGate&&"video-block"===e.triggerComponent,u=e.usersAge<e.ageThreshold,g=e.usersAge<e.ratingAgeThreshold,h=!!u&&(d&&!g);c(_.COOKIE_NAME,e.usersAge,e.cookieTimeout);var p=d?g:u;if(p)T(!0).then(function(t){i.remove(),i=null,e.showAccessDenied(),d&&!u&&e.setAgeGateSuccess(!1,!1),e.logAgeGateDtmEvent(n,"submit age-gate too-young","sumbit","button"),a()});else{if(!e.isAutoTriggered)return void T(!1).then(function(a){i.addClass("display--hidden"),e.logAgeGateDtmEvent(n,"submit age-gate","submit","button"),_gpdc.analytics._satelliteTrack("age_gate_submit"),i.remove(),t(h)});e.logAgeGateDtmEvent(n,"submit age-gate","submit","button"),_gpdc.analytics._satelliteTrack("age_gate_submit"),window.location.reload()}}})})}},{key:"applyTabOrder",value:function(e){var t=this,a=this.getAgeGateElement(),i=a.find(".age-gate__input-btn");switch(e){case"SIGN_IN":this.lastElementTabIndex=2,a.find('[data-sign-in-link="true"]').attr("tabindex",this.lastElementTabIndex);break;case"ACCESS_DENIED":this.lastElementTabIndex=2,a.find(".text-block a").attr("tabindex",this.lastElementTabIndex);break;case"DOB":var n=(_gpdc.elements.$body.data("date-format")||"YYYY/MM/DD").toLowerCase().split(/\/|\-|\:|\.|\,/);n.forEach(function(e,i){var n=_.FIELDS[e.substring(0,1)],o=i+1;a.find(n).addClass("order--"+o),a.find(n+" input").attr("tabindex",o+1),t.lastElementTabIndex++}),i.attr("tabindex",this.lastElementTabIndex),this.lastElementTabIndex++,a.find('[data-sign-in-link="true"]').attr("tabindex",this.lastElementTabIndex)}}},{key:"handleCustomFocus",value:function(e,t,a){16===e.keyCode||"Tab"!==e.key&&9!==e.keyCode||(e.preventDefault(),e.stopPropagation(),this.getAgeGateElement().find('[tabindex="'+(e.shiftKey?t:a)+'"]').focus())}},{key:"ageGateAccessibilityUtils",value:function(e){var t=this,a=this.getAgeGateElement();"on"===e?a.find('[tabindex="2"]').focus():this.$triggerElement&&this.$triggerElement.focus(),a.find('[tabindex="'+this.lastElementTabIndex+'"]')[e]("keydown.dkAgeGate",function(e){t.handleCustomFocus(e,t.lastElementTabIndex-1,1)}),a.find('[tabindex="1"]')[e]("keydown.dkAgeGate",function(e){t.handleCustomFocus(e,t.lastElementTabIndex,2)})}},{key:"defineDOBAgeGateFields",value:function(e,t){var a=this,i=this.getAgeGateElement(),n=i.find(".age-gate__input-field");this.applyTabOrder(this.ageGateType),n.each(function(e,t){var n=$(t),o=n.get(0).tabIndex+1,s=i.find('[tabindex="'+o+'"]');a.attachInputFieldEventHandler(n,s)}),this.attachSubmitBtnLogic().then(function(t){return e(t)}).catch(t)}},{key:"showAgeGate",value:function(){var e=this;return new Promise(function(t,a){var i=e.getCorrectAgeGateElm(".age-gate"),n=i.ageGateElmVar,o=i.ageGateElmRef;e[n]=o,e[n]&&e[n].length?("DOB"===e.ageGateType&&e.defineDOBAgeGateFields(t,a),e.defineAgeGateEscape(a),T(!0).then(function(t){e[n].removeClass("display--hidden"),e.logAgeGateDtmEvent(e[n],"open age-gate",l.EMPTY_LABEL,"popup"),e.ageGateAccessibilityUtils("on")})):w(_.TYPE_TEMPLATE_ID_MAP[e.ageGateType]).then(function(i){var n=e.getCorrectAgeGateElm(".age-gate",!0),o=n.ageGateElmVar,s=n.ageGateElmRef;e[o]=s,e.updateSignInLink(),e.defineAgeGateEscape(a),"DOB"===e.ageGateType?T(!0).then(function(i){e.defineDOBAgeGateFields(t,a)}).then(function(t){e.logAgeGateDtmEvent(e[o],"open age-gate",l.EMPTY_LABEL,"popup"),e.ageGateAccessibilityUtils("on")}):(T(!0).then(function(t){e.applyTabOrder(e.ageGateType),e.logAgeGateDtmEvent(e[o],"open age-gate",l.EMPTY_LABEL,"popup"),e.ageGateAccessibilityUtils("on")}),a())}).catch(function(e){_gpdc.Logger.warn("Unable to find Age Gate HTML Template!!",e)})})}},{key:"getCorrectAgeGateElm",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.isAdvancedAgeGate&&"video-block"===this.triggerComponent?"rated-video-gate":"generic-gate",i="rated-video-gate"===a?":not(.generic-gate)":":not(.rated-video-gate)",n="rated-video-gate"===a?"$ageGateVideo":"$ageGate",o=$(""+e+(t?i:"."+a));return t&&(o.addClass(a),o=$(e+"."+a)),{ageGateElmVar:n,ageGateElmRef:o}}},{key:"isGated",value:function(e){var t=e.data(),a=t.ageGated,i=void 0!==a&&a,n=t.forceAgeGate,o=void 0!==n&&n;return i===!0||o===!0}},{key:"triggerIfNeeded",value:function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.isGated(e)?(this.userState.save(e.data(p.COMPONENT_INSTANCE_ID_ATTR)),this.triggerAgeGate(e)):Promise.resolve()}},{key:"callShowAgeGate",value:function(e,t){var a=this;this.showAgeGate().then(function(t){a.setAgeGateSuccess(!1,t),e()}).catch(t)}},{key:"triggerAgeGate",value:function(e){var t=this;return new Promise(function(a,i){if(t.$triggerElement=e,t.$triggerElement&&!t.$triggerElement.hasClass("media-block")&&(t.$triggerElement=t.$triggerElement.find(".media-block")),t.usersAge=t.loggedInUser?t.loggedInUser.age:parseInt(u(_.COOKIE_NAME)||"0"),t.triggerComponent=t.$triggerElement?t.$triggerElement.data("component"):null,t.isAdvancedAgeGate&&"video-block"===t.triggerComponent){var n=t.usersAge>=t.ratingAgeThreshold;return void(n||t.loggedInUser&&t.loggedInUser.isPageRatingMature?(c(_.COOKIE_NAME,t.usersAge||t.loggedInUser.age,t.cookieTimeout),t.setAgeGateSuccess(!1,t.ratingAgeLessThanAgeThreshold),a()):t.usersAge||t.loggedInUser?(c(_.COOKIE_NAME,t.usersAge||1,t.cookieTimeout),t.showAccessDenied(),i()):t.callShowAgeGate(a,i))}var o=t.usersAge>=t.ageThreshold;o||t.loggedInUser&&t.loggedInUser.isMature?(c(_.COOKIE_NAME,t.usersAge||t.loggedInUser.age,t.cookieTimeout),t.setAgeGateSuccess(!1,!1),a()):t.usersAge||t.loggedInUser?(c(_.COOKIE_NAME,t.usersAge||1,t.cookieTimeout),t.showAccessDenied(),i()):(t.isAutoTriggered&&I(_.CONTENT),t.callShowAgeGate(a,i))})}},{key:"init",value:function(){var e=this;this.usersAge=this.loggedInUser?this.loggedInUser.age:parseInt(u(_.COOKIE_NAME)||"0"),this.isMatureRatedPage&&(this.loggedInUser&&!this.loggedInUser.isMature?this.isAutoTriggered=!0:_gpdc.elements.$body.addClass(this.IGNORE_RATING_CLASS));var t=u(_.COOKIE_NAME);!this.isAdvancedAgeGate||"success"!==t&&"failure"!==t||g(_.COOKIE_NAME),this.isAutoTriggered?this.triggerAgeGate(null).catch(function(e){}):this.checkAgeGateStatus(!0);var a=$("[data-trigger-gated-elm]");return!(!a||!a.length)&&void a.each(function(t,a){var i=$(a);i.on("click.psAgeGate",function(){e.triggerAgeGate(i).then(function(e){i.trigger("success.psAgeGate.attr")}).catch(function(e){})})})}}]),a}(),M=function(){function a(){e(this,a)}return t(a,[{key:"setUpVideoPlayers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={controls:!0,controlBar:{pictureInPictureToggle:!1,volumePanel:!0,currentTimeDisplay:!0,durationDisplay:!0,remainingTimeDisplay:!1,timeTooltip:!1},autoplay:!1,preload:"auto",fluid:!0,fill:!0};$.each(t,function(t,a){var n=$(a).closest(".media-block--video"),o=videojs(a,i);o.on("ready",function(){var t=parseInt(n.attr("tabindex")||"0",10)+1;e.setUpCustomButtons(n,t,o)})}),1===t.length&&a&&t.focus()}},{key:"addCustomListeners",value:function(e,t,a,i){e.on("keyup.dkVideoBlock",function(e){var t=e.key,a=e.keyCode;if("Enter"==t||"Space"==t||13==a||32==a){var n=$(document.activeElement);n.is("video")||n.hasClass("media-block--video")||n.hasClass("vjs-volume-bar")?i.paused()?i.play():i.pause():n.hasClass("pause-video")&&setTimeout(function(){return n.prev().focus()},30)}}),e.on("keydown.dkVideoBlock",function(a){16===a.keyCode||"Tab"!==a.key&&9!==a.keyCode||(a.preventDefault(),a.stopPropagation(),!a.shiftKey&&$(a.target).hasClass("media-block--video")?e.find('[tabindex="'+t+'"]:visible').eq(0).focus():a.shiftKey&&t>2&&e.closest(".media-lightbox").find('[tabindex="'+(t-2)+'"]').focus())}),e.find('[tabindex="'+a+'"]').on("keydown.dkVideoBlock",function(i){if(16!==i.keyCode&&("Tab"===i.key||9===i.keyCode))if(i.preventDefault(),i.stopPropagation(),i.shiftKey)e.find('[tabindex="'+(a-1)+'"]').focus();else{var n=e.closest(".media-lightbox").find('[tabindex="'+(t+6)+'"]');n.length?n.focus():function(){}}})}},{key:"setUpCustomButtons",value:function(e,t,a){var i=void 0,n=void 0,o=void 0,s=void 0,r=void 0,l=void 0,d=$("#custom-btn-template"),c=d.prop("content"),u=$(c).find("svg"),g=t+5;e.find(".vjs-big-play-button").attr("tabindex",t),e.find(".vjs-mute-control").attr("tabindex",t+2),e.find(".vjs-volume-bar").attr("tabindex",t+3),e.find(".vjs-progress-holder").attr("tabindex",t+4);var h=e.find(".vjs-control-bar .vjs-play-control");$.each(u,function(e,d){var c=a.controlBar.addChild("button"),u=$(d).attr("data-btn-id"),p=c.el(),v=$(p);switch(v.append(document.importNode(d,!0)),u){case"play-video":i=v.attr("tabindex",t),v.addClass("play-video"),v.insertBefore(h);break;case"pause-video":n=v.attr("tabindex",t),v.addClass("pause-video"),v.insertBefore(h);break;case"replay-video":o=v.attr("tabindex",t),v.addClass("replay-video"),v.insertAfter(h);break;case"back-to-start":s=v,v.addClass("back-to-start").attr("tabindex",t+1),v.insertAfter(h);break;case"full-screen":r=v.attr("tabindex",g),v.addClass("full-screen-control");break;case"close-full-screen":l=v.attr("tabindex",g),v.addClass("close-full-screen-control")}}),a.on("play",function(){$(".vjs-big-play-button").hide(),i.hide(),o.hide(),s.show(),n.show().focus()}),a.on("pause",function(){n.hide(),i.show().focus()}),a.on("ended",function(){i.hide(),s.hide(),o.show().focus()}),a.on("fullscreenchange",function(){setTimeout(function(){a.hasClass("vjs-fullscreen")?$(a.el_).find('[tabindex="'+t+'"]').focus():(l.hide(),r.show().focus())},50)}),i.on("click.dkPlayVideo touchend.dkPlayVideo",function(){i.hide(),n.show(),a.play()}),n.on("click.dkPauseVideo touchend.dkPauseVideo",function(){n.hide(),i.show(),a.pause()}),o.on("click.dkReplayVideo touchend.dkReplayVideo",function(){o.hide(),s.show(),n.show(),a.play()}),s.on("click.dkBackToStart touchend.dkBackToStart",function(){a.currentTime(0)}),r.on("click.dkFullScreen touchend.dkFullScreen",function(){r.hide(),l.show(),a.requestFullscreen()}),l.on("click.dkCloseFullScreen touchend.dkCloseFullScreen",function(){l.hide(),r.show(),a.exitFullscreen()}),this.addCustomListeners(e,t,g,a)}}]),a}(),N=function(){function a(){e(this,a),this.ageGate=new P}return t(a,[{key:"processEmbedVideo",value:function(e,t,a){var i=$.trim(e.attr("data-playlist")||""),n=""+v.EMBED_URL+a+"?controls=1&enablejsapi=1";i||"true"!==e.attr("data-loop")?i&&(n+="&loop=1&listType=playlist&list="+i):n+="&loop=1&playlist="+a,"true"===e.attr("data-autoplay")&&(n+="&autoplay=1&rel=0",t.attr("allow","autoplay; encrypted-media"));var o=e.attr("data-yt-captions");o&&(n+="&cc_lang_pref="+o+"&cc_load_policy=1");var s=window.location.origin;n+="&origin="+s+"&widget_referrer="+s;var r="yt-video-"+a;t.attr("src",n),t.attr("id",r);try{var l=new YT.Player(r);t.data("player",l)}catch(e){_gpdc.Logger.warn("YouTube API error",e)}}},{key:"setupEmbeddedVideos",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'[data-embed-video="true"]',a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t instanceof jQuery?t:$(t);i&&i.length&&i.each(function(t,i){var n=$(i),o=n.find("iframe"),s=n.attr("data-video-id");a?e.processEmbedVideo(n,o,s):(o.hide(),e.ageGate.triggerIfNeeded(n).then(function(){o.show(),e.processEmbedVideo(n,o,s)}).catch(function(){_gpdc.Logger.log("Age gate failed on YT Embed Video Block.")}))})}},{key:"loadYoutubeApi",value:function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},{key:"init",value:function(){this.loadYoutubeApi(),this.setupEmbeddedVideos('[data-embed-video="true"]',!1),_gpdc.Logger.log("YT Embed Video initialized!!")}}]),a}(),G=6,B=void 0,O=1,R=function(){function a(){e(this,a),this.videoPlayer=new M,this.ytEmbedVideo=new N,this.carousel=new D,_gpdc.Logger.log("MediaLightbox instantiated!!")}return t(a,[{key:"openMediaLightbox",value:function(e,t,a,i){var n=this,o=$(".media-lightbox__main");return B=t,B.data("dk-media-lightbox")===!0?Promise.reject():(B.data("dk-media-lightbox",!0),new Promise(function(s,r){o.length?n.displayMediaLightbox(i,!1,e).then(function(i){n.chooseLightboxType(e,t,a,o),s(i)},function(e){return r(err)}):w("#media-lightbox__template").then(function(l){o=$(".media-lightbox__main"),
n.displayMediaLightbox(i,!0,e).then(function(i){n.chooseLightboxType(e,t,a,o),s(i)},function(e){return r(err)})}).catch(function(e){r(e),_gpdc.Logger.warn("Unable to find Media LightBox HTML Template!!")})}))}},{key:"chooseLightboxType",value:function(e,t,a,i){var n=$(".media-lightbox"),o=$(".media-lightbox__lower");if(O=1,"carousel"===e)i.addClass("carousel"),this.createLightboxCarousels(a);else{var s=t.data("component");n.addClass("no-carousel"),o.addClass("no-carousel-lower"),"video-block"===s||"live-image"===s?this.cloneMediaBlockIntoLightbox("video",t,i,"main"):"image-block"===s&&(this.cloneMediaBlockIntoLightbox("image",t,i,"main"),this.fullscreenLightboxMedia())}}},{key:"displayMediaLightbox",value:function(e,t,a){var i=this,n=$(".media-lightbox"),o=$(".media-lightbox__main"),s=$(".media-lightbox__lower");return new Promise(function(r,l){T(!0).then(function(l){n.addClass("show reveal "+e),o.addClass("reveal"),setTimeout(function(){s.addClass("reveal"),i.lightboxAccessibilityUtils("on",a)},250),t&&(n.on("click.dkMediaLightbox",function(e){return i.closeMediaLightbox(e)}),_gpdc.elements.$document.on("keyup.dkMediaLightboxImage",function(e){"Escape"!==e.key&&"Esc"!==e.key&&27!==e.keyCode||(e.stopPropagation(),i.closeMediaLightbox(e))}),o.on("click",function(e){return e.stopPropagation()}),i.carousel.addAnalyticsEventHandlers(o)),r(l)},function(e){return l(e)})})}},{key:"closeMediaLightbox",value:function(e){var t=$(".media-lightbox"),a=$(".media-lightbox__main"),i=$(".media-lightbox__fullscreen-image"),n=$(".media-lightbox__lower");return a.hasClass("fullscreen")?void this.exitFullScreenMode(e):(n.hasClass("flickity-enabled")&&(this.carousel.destroyCarousel(n),n.empty()),a.hasClass("flickity-enabled")&&(a.removeClass("carousel"),this.carousel.destroyCarousel(a)),t.removeClass("reveal no-carousel"),a.removeClass("reveal"),n.removeClass("reveal no-carousel-lower"),i.removeClass("reveal"),this.lightboxAccessibilityUtils("off"),void T(!1).then(function(){setTimeout(function(){t.removeClass("show light dark"),n.removeClass("fullscreen"),a.removeClass("fullscreen").empty(),i.removeClass("show").empty()},250)}))}},{key:"createLightboxCarousels",value:function(e){var t=this,a=$(".media-lightbox__main"),i=$(".media-lightbox__lower"),n=e.find(".carousel-cell, .media-carousel__cell"),o=e.data("carousel-cell-index");$.each(n,function(e,n){var s=$(n);s=s.hasClass("media-block")?s:s.find(".media-block");var r=s.data("component");switch(r){case"image-block":t.cloneMediaBlockIntoLightbox("image",s,a,"main",!0,e),t.cloneMediaBlockIntoLightbox("image",s,i,"lower",!0,e);break;case"video-block":case"live-image":t.cloneMediaBlockIntoLightbox("video",s,a,"main",!0,e),t.cloneMediaBlockIntoLightbox("image",s,i,"lower",!0,e);break;default:e<o?o--:e===o&&(o=0)}}),this.carousel.createCarousel(a,{accessibility:!0,cellAlign:"center",contain:!1,prevNextButtons:!0,pageDots:!1,percentPosition:!0,fullscreen:!0,imagesLoaded:!0,initialIndex:o}).catch(function(){}),this.carousel.createCarousel(i,{asNavFor:".media-lightbox__main",cellAlign:"left",contain:!1,prevNextButtons:!0,pageDots:!1,percentPosition:!0,imagesLoaded:!0,accessibility:!1,initialIndex:o}).catch(function(){}),this.fullscreenLightboxMedia(),this.carousel.addAnalyticsEventHandlers(a),i.on("click.dkMediaLightbox",function(e){return e.stopPropagation()}),i.on("hover.dkMediaLightbox",function(){a.hasClass("carousel")&&a.addClass("shade")},function(){a.hasClass("carousel")&&a.removeClass("shade")})}},{key:"cloneMediaBlockIntoLightbox",value:function(e,t,a,i){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=(arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,$(".toCloneImage")),s=$(".toCloneVideo"),r=$(".toCloneYoutubeVideo"),l=t.attr("data-caption"),d=t.data("video-id"),c=t.data("yt-captions"),u="video"===e&&!d,g=void 0;if("image"===e){var h=t.data("component"),p=void 0,v=void 0;"video-block"!==h&&"live-image"!==h||"lower"!=i?(p=t.attr("data-src"),v=t.attr("data-src-desktop")||p):(p=t.attr("data-video-thumbnail"),v=t.attr("data-video-desktop-thumbnail")||p);var f=this.getTransparentRenditionVariant(t,!0),m=this.getTransparentRenditionVariant(t,!1),_=k.pictureTag[i||"main"],b=_.replace(/IMG_SRC_MOBILE/g,p).replace(/IMG_SRC_DESKTOP/g,v).replace(/MOBILE_TRANSPARENT/g,f).replace(/DESKTOP_TRANSPARENT/g,m);o.clone().appendTo(a),g=a.find(".toCloneImage"),g.attr({"data-src":p,"data-src-desktop":v}),g.removeClass("cloner toCloneImage"),g.find(".media-block__img").html(b)}else if(u){var y=t.data("src"),C=_gpdc.elements.$window.width()>767?t.data("src-desktop"):y,E=void 0;s.clone().appendTo(a),g=a.find(".toCloneVideo"),E=g.find("video"),E.addClass("video-js"),g.removeClass("cloner toCloneVideo"),g.find("source").attr("src",C||y),this.videoPlayer.setUpVideoPlayers(E,!0)}else"video"===e&&d&&(r.clone().appendTo(a),g=a.find(".toCloneYoutubeVideo"),g.attr({"data-video-id":d,"data-component":"youtube-embed-block","data-yt-captions":c}).removeClass("cloner toCloneYoutubeVideo"),this.ytEmbedVideo.setupEmbeddedVideos('[data-component="youtube-embed-block"]',!1));"main"===i&&l&&g.append('<figcaption class="media-block__caption">'+l+"</figcaption>"),n?(g.addClass("carousel-cell"),"lower"!==i?(O++,g.attr("tabindex",O)):g.attr("tabindex",-1)):"fullscreen"!==i&&(O++,g.attr("tabindex",O)),"lower"!==i&&u&&(O+=G),d&&(O++,g.find("iframe").attr("tabindex",O))}},{key:"exitFullScreenMode",value:function(e){e.stopPropagation();var t=$(".media-lightbox__main"),a=$(".media-lightbox__lower"),i=$(".media-lightbox__fullscreen-image"),n=$(".media-lightbox").data("close-label");i.removeClass("reveal"),t.removeClass("fullscreen"),a.removeClass("fullscreen"),setTimeout(function(){t.addClass("reveal"),i.removeClass("show").empty(),$(".media-lightbox__close svg").attr("aria-label",n)},450)}},{key:"fullscreenLightboxMedia",value:function(){var e=this,t=$(".media-lightbox__main"),a=$(".media-lightbox__lower"),i=$(".media-lightbox__fullscreen-image"),n=t.find('[data-component="image-block"]'),o=$(".media-lightbox").data("close-fullscreen-label");$.each(n,function(n,s){var r=$(s);r.on("click.dkMediaLightbox keypress.dkMediaLightboxKeyPress",function(n){return n.stopPropagation(),t.hasClass("fullscreen")?void e.exitFullScreenMode(n):void("keypress"===n.type&&13!==n.keyCode||(t.addClass("fullscreen"),a.addClass("fullscreen"),e.cloneMediaBlockIntoLightbox("image",r,i,"fullscreen"),i.addClass("show"),t.removeClass("reveal"),setTimeout(function(){i.addClass("reveal"),$(".media-lightbox__close svg").attr("aria-label",o),$(".media-lightbox__close").focus()},450)))}),i.on("click.dkMediaLightbox",function(t){return e.exitFullScreenMode(t)})})}},{key:"getTransparentRenditionVariant",value:function(e,t){var a='[media="(min-width: '+(t?"320px":"768px")+')"]';return(e.find("source"+a).attr("srcset")||"").indexOf("--t$")>-1?"--t$":"$"}},{key:"handleCustomFocus",value:function(e,t,a){var i=$(".media-lightbox");16===e.keyCode||"Tab"!==e.key&&9!==e.keyCode||(e.preventDefault(),e.stopPropagation(),i.find('[tabindex="'+(e.shiftKey?t:a)+'"]').focus())}},{key:"lightboxAccessibilityUtils",value:function(e,t){var a=this,i=$(".media-lightbox");"on"===e?"carousel"===t?i.find(".is-selected")[0].focus():i.find('[tabindex="2"]').focus():B&&(B.data("dk-media-lightbox",!1),setTimeout(function(){return B.focus()},300)),i.find('[tabindex="'+O+'"]')[e]("keydown.dkMediaLightbox",function(e){a.handleCustomFocus(e,O-1,1)}),i.find('[tabindex="1"]')[e]("keydown.dkMediaLightbox",function(e){a.handleCustomFocus(e,O,2)})}}]),a}(),D=function(){function a(){e(this,a),this.userState=new b,this.arrowShape="M32.483 43.12l-16.66-16.185a2.007 2.007 0 0 1 0-2.879l16.66-16.18a2.007 2.007 0 0 1 2.823.026l.617.622a2.007 2.007 0 0 1-.027 2.853l-13.058 12.68a2.007 2.007 0 0 0 0 2.878L35.896 39.62a2.007 2.007 0 0 1 .027 2.852l-.617.622a2.007 2.007 0 0 1-2.823.027z",this.carouselCellClass=".carousel-cell, .media-carousel__cell",this.isAdvancedAgeGate=_gpdc.elements.$body.data("advanced-age-gate")}return t(a,[{key:"init",value:function(){this.createCarousel().catch(function(){}),this.addCarouselClickHandlers(),_gpdc.Logger.log("Carousel initialized!!")}},{key:"addCarouselClickHandlers",value:function(){var e=this,t=$('[data-carousel="true"]');$.each(t,function(t,a){var i=$(a);i.find(".next"),i.find(".previous"),i.data("flickity");$.each(i.find(e.carouselCellClass),function(e,t){return $(t).data("cell-idx",e)}),i.on("keyup.dkCarouselFocus",function(e){var t=e.key,a=e.keyCode;"Tab"!==t&&9!==a||i.addClass("focus-in")}),i.on("blur.dkCarouselBlur",function(){i.removeClass("focus-in")}),i.on("keydown.dkCarousel",function(t,a,n,o){var s=t.target,r=t.type,l=t.key,d=t.keyCode;if("keydown"==r&&("Enter"===l||13===d)){var c=$(s),u=c.filter(".carousel-cell.is-selected, .media-carousel__cell.is-selected").length?c:c.find(".carousel-cell.is-selected, .media-carousel__cell.is-selected");e.performLightboxChecks(u,u.find("picture"),i,u.data("cell-idx"))}}),i.on("staticClick.flickity",function(t,a,n,o){var s=t.target,r=t.type;"staticClick"==r&&e.performLightboxChecks($(n),$(s),i,o)}),e.addAnalyticsEventHandlers(i)})}},{key:"performLightboxChecks",value:function(e,t,a,i){var n=this;if(e&&e.length&&t&&t.length){var o=$(e).hasClass("media-block")?$(e):$(e).find(".media-block"),s=a.data("disable-lightbox");if(!this.shouldContinueClickHandling(t,o,s)||!t.closest(".media-block__inner").length)return void _gpdc.Logger.log("Carousel Cell click - action returned due to either lightbox disabled or click being on Pause/Play toggle or on cell description text, buttons, etc");var r=a.data("lightbox-theme")||"dark",l=new P,d=this.isAdvancedAgeGate?l.isGated(o):a.data("carousel-age-gated");d?(this.userState.save(a.data(p.COMPONENT_INSTANCE_ID_ATTR),p.COMPONENT_INSTANCE_ID_ATTR,i),l.triggerAgeGate(o).then(function(t){n.userState.clear(),n.triggerLightBox(e,a,r,i,o,s),n.logCarouselDtmEvent(a,"click",e)}).catch(function(e){_gpdc.Logger.log("Age gate failed on Carousel!",e)})):(this.triggerLightBox(e,a,r,i,o,s),this.logCarouselDtmEvent(a,"click",e))}}},{key:"shouldContinueClickHandling",value:function(e,t,a){var i=e.hasClass("icon")||e.closest(".media-block__overlay").length;if(t.data("pause-play-toggle")&&i)return!1;var n=t.data("component");return!(!a||"video-block"!==n)||(!(!a||"video-block"===n||!t.data("age-gated"))||!a)}},{key:"triggerLightBox",value:function(e,t,a,i,n,o){var s="video-block"===n.data("component");if(!o||s){var r=new R;return t.data("carousel-cell-index",i),this.isAdvancedAgeGate||o&&s?void r.openMediaLightbox("singleMedia",n,null,a).catch(function(){}):void r.openMediaLightbox("carousel",e,t,a).catch(function(){})}}},{key:"addAgeGateAttribute",value:function(e){var t=!1;$.each(e.find(this.carouselCellClass),function(e,a){var i=$(a),n=i.hasClass("media-block")?i:i.find(".media-block");(n.data("age-gated")||n.data("force-age-gate"))&&(t=!0)}),e.data("carousel-age-gated",t)}},{key:"createCarousel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'[data-carousel="true"]',a=arguments[1];return new Promise(function(i,n){var o=$(t);o.length?($.each(o,function(t,i){var n=$(i),o=n.data("initial-index"),r={cellAlign:"center",accessibility:!0,adaptiveHeight:!0,wrapAround:!0,groupCells:!1,contain:!0,prevNextButtons:!0,pageDots:!0,percentPosition:!0,arrowShape:e.arrowShape,watchCSS:!0,selectedAttraction:.04,friction:.4},l=void 0,d=Object.assign(r,a);if(!n.hasClass("gallery")){o>=0&&(d.initialIndex=o),(n.hasClass("slider__controls--swatches")||n.hasClass("slider__controls--thumbnails"))&&(d.wrapAround=!1),e.addAgeGateAttribute(n),n.data("initial-index")>0&&(d.initialIndex=n.data("initial-index"));var c=n.closest(".media-carousel").find(".media-carousel__pagination");if(c.length){d.pageDots=!1;var u=function(e,t){c[0].pagination("select",t+1)};c.on("change.dkPagination",function(e,t){n.off("change.flickity",u),n.flickity("select",t-1),n.on("change.flickity",u)})}n.on("ready.flickity",function(){var e=n.closest(".media-carousel__content").find(".media-carousel__pager");e.length&&e.prepend('\n                                <div class="'+n.attr("class")+'">\n                                    <div class="media-carousel__cell"><!-- --></div>\n                                </div>\n                            ')}),n.flickity(d);var g=n.data("flickity");n.find(".media-carousel__cell .media-carousel__description").length&&n.find(".flickity-button").css("top",n.find(".is-selected .media-block").height()/2),n.on("change.flickity",function(e,t){var a=$(".media-block--video .video-js"),i=$(".embed-video iframe");d.fullscreen&&($.each(a,function(e,t){videojs($(t).attr("id")).pause()}),$.each(i,function(e,t){$(t)[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")})),c.length&&c[0].pagination("select",t+1),l=t});var h=n.data("carousel-mobile"),p=n.data("carousel-desktop");(h||void 0==h)&&s.IS_MOBILE&&n.find(e.carouselCellClass).attr("tabindex",-1),(p||void 0==p)&&s.IS_TABLET&&n.find(e.carouselCellClass).attr("tabindex",-1),n.closest(".game-hero__gallery").length&&g.cells.length<4&&(n.find(".flickity-button").hide(),n.find(".flickity-page-dots").hide(),g.unbindDrag()),n.find(".flickity-button.previous").attr("tabindex",-1),n.find(".flickity-button.next").attr("tabindex",-1)}}),i("success")):n("error")})}},{key:"destroyCarousel",value:function(e){return new Promise(function(t){e.flickity("destroy"),t()})}},{key:"getMediaType",value:function(e){var t=(e.hasClass("media-block")?e:e.find(".media-block")).data()||{},a=t.component;return"video-block"==a||"live-image"==a?"video":"image"}},{key:"addAnalyticsEventHandlers",value:function(e){var t=this;e.find(".next").on("click.carouselNext",function(){t.logCarouselDtmEvent(e,"next"),t.logCarouselDtmEvent(e,"click")}),e.find(".prev").on("click.carouselPrev",function(){t.logCarouselDtmEvent(e,"prev"),t.logCarouselDtmEvent(e,"click")})}},{key:"logCarouselDtmEvent",value:function(e,t,a){var i=a&&a.length?a:e.find(".is-selected"),n=this.getMediaType(i),o="",s="",r="",d=!1;if("next"==t||"prev"==t)o="select carousel "+t,d=!0;else if("click"==t){var c=i.hasClass("media-block")?i:i.find(".media-block");o="select "+n,s=c.data("src-desktop")||c.data("src"),r=e.find(this.carouselCellClass).index(i)}_gpdc.analytics.event.addGDLEvent("click",o,{moduleName:"carousel",elementType:n,assetName:s||l.EMPTY_LABEL,linkUrl:l.EMPTY_LABEL,label:l.EMPTY_LABEL,userActionFlag:d,position:r+1||"1"},e)}}]),a}(),V=function(e,t,a){var i=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]&&arguments[4]),n={assetName:e.data("video-id")||e.data("src-desktop")||e.data("src")||l.EMPTY_LABEL,position:"1",label:l.EMPTY_LABEL,moduleName:a,elementType:t,userActionFlag:!1};i&&(n.linkUrl=e.attr("href")),_gpdc.analytics.event.addGDLEvent("click","select "+t,n,e)},U=function(e,t){return t?t.find(e):$(e)},F=function(){function a(t){e(this,a),this.$context=t,this.ageGate=null,this.mediaLightBox=null}return t(a,[{key:"init",value:function(){var e=U('[data-component="live-image"], [data-component="bg-video"]',this.$context);e.length&&(this.ageGate=new P,this.mediaLightBox=new R,$.each(e,this.processInlineVideo.bind(this)))}},{key:"processInlineVideo",value:function(e,t){var a=this,i=$(t),n=i.data("auto-pause-play"),o=i.data("pause-play-toggle"),r=i.data("playback-limit"),l=i.data("post-playback"),d=s.IS_TABLET?"video.media-block__video\\@tablet":"",c=i.find(d),u=i.find(".media-block__img");c=c.length?c:i.find("video"),c.length&&u.length&&(r&&!o&&this.addVideoPlayEndHandler(i,c,r,l),"image"!==l&&this.addVideoClickHandler(i,o,l),c.hasClass("lozad")&&!c.hasClass("lazy-loaded")?c.watch({properties:"attr_class",callback:function(e){return a.checkIfVideoPlaying(e,i,c,n)}}):this.checkIfVideoPlaying(null,i,c,n))}},{key:"addVideoPlayEndHandler",value:function(e,t,a,i){var n={image:"+inline-video--removed",replay:"+replay-inline-video"},o=0;t.on("ended.dkInlineVideo",function(t){var s=t.currentTarget;o++,o===a?(e.addClass(n[i]).data("video-ended",!0),_gpdc.Logger.log("Video playback reached set count limit: "+o),o=0):s.play()})}},{key:"addVideoClickHandler",value:function(e,t,a){var i=this,n=t||"replay"===a?e.find(".media-block__overlay > .icon"):e;n.on("click.dkInlineVideo",function(o){o.preventDefault();var s=e.find("video:visible").get(0);if(t){var r=e.hasClass("+inline-video--paused");return r?s.play():s.pause(),void e[r?"removeClass":"addClass"]("+inline-video--paused").data("user-paused",!r)}if(n.closest('[data-carousel="true"]').length)return void _gpdc.Logger.log("Returned from inline video click, since it is in carousel");var l=e.data("video-ended");if(l)return"replay"===a?(e.removeClass("+replay-inline-video").data("video-ended",!1),s.currentTime=0,void s.play()):void("dam"!==a&&"youtube"!==a||i.ageGate.triggerIfNeeded(e).then(function(){i.mediaLightBox.openMediaLightbox("singleMedia",e,null,e.data("lightbox-theme")||"dark").catch(function(){}),V(e,"video","liveimageblock",500)}).catch(function(){return _gpdc.Logger.log("Age gate failed on Live Image Block.")}))})}},{key:"checkIfVideoPlaying",value:function(e,t,a,i){var n=this;try{a.on("error.dkInlineVideo",function(){n.applyFallback(t)}),a.on("loadeddata.dkInlineVideo",function(){var e=a.get(0);e.readyState>=1&&setTimeout(function(){return e.buffered&&e.buffered.length?(e.buffered.end(0)>0||!e.paused||t.hasClass("+inline-video--paused")?n.setupVideoInView(t,a,i):n.applyFallback(t),void a.off("loadeddata.dkInlineVideo")):void n.applyFallback(t)},p.INLINE_VIDEO_WAIT)})}catch(e){this.applyFallback(t),a.off("loadeddata.dkInlineVideo"),_gpdc.Logger.log("Inline Video exception while checking if video is playing:",e)}e&&setTimeout(function(){return a.unwatch(e.id)},10)}},{key:"applyFallback",value:function(e){e.removeClass("+inline-video +interactive").addClass("+inline-video--removed"),e.find("video").remove(),e.find(".media-block__overlay").remove()}},{key:"setupVideoInView",value:function(e,t,a){if(a&&window.Waypoint){new Waypoint.Inview({element:t,enter:function(){e.data("video-ended")||e.data("user-paused")||(t.get(0).play(),e.removeClass("+inline-video--paused"))},exited:function(){e.data("video-ended")||e.data("user-paused")||(t.get(0).pause(),e.addClass("+inline-video--paused"))}})}}}]),a}(),W=function(){function a(t){e(this,a),this.$context=t,this.ageGate=null,this.mediaLightBox=null,this.ytLinkClass="media-block__youtube-link"}return t(a,[{key:"init",value:function(){var e=U('[data-component="video-block"][data-lightbox="true"]:not(.carousel [data-component="video-block"][data-lightbox="true"])',this.$context);return!!e.length&&(this.ageGate=new P,this.mediaLightBox=new R,$.each(e,this.process.bind(this)),void _gpdc.Logger.log("Video Block Plugin initialized!!"))}},{key:"process",value:function(e,t){var a=this,i=$(t);i.on("click.dkVideoBlock keydown.dkVideoBlockKeyDown",function(e){var t=e.key,n=e.type,o=e.target,s=$(o),r=s.hasClass(a.ytLinkClass)||s.closest("."+a.ytLinkClass).length;"keydown"===n&&"Enter"!==t||r||a.ageGate.triggerIfNeeded(i).then(function(){a.mediaLightBox.openMediaLightbox("singleMedia",i,null,i.data("lightbox-theme")||"dark").catch(function(){}),V(i,"video","videoblock",500)}).catch(function(){return _gpdc.Logger.log("Age gate failed on Video Block.")})})}}]),a}(),H="javascript:void(0);",K=function(){function a(){e(this,a),this.ageGate=null,this.mediaLightBox=null}return t(a,[{key:"init",value:function(){var e=$('[data-component="image-block"][data-lightbox]:not(.carousel [data-component="image-block"][data-lightbox])');return!!e.length&&(this.ageGate=new P,this.mediaLightBox=new R,$.each(e,this.process.bind(this)),void _gpdc.Logger.log("Image Block Plugin initialized!!"))}},{key:"process",value:function(e,t){var a=this,i=$(t),n=i.data("lightbox"),o=i.attr("href")||H,s=o!==H;i.attr("tabindex",n||i.data("age-gated")||s?0:-1),i.on("click.dkImageBlock keydown.dkImageBlockKeyUp",function(e){var t=e.type,o=e.key;"keydown"===t&&"Enter"!==o||a.ageGate.triggerIfNeeded(i).then(function(){return n&&a.mediaLightBox.openMediaLightbox("singleMedia",i,null,i.data("lightbox-theme")||"dark").catch(function(){}),n||s?void V(i,"image","imageblock",500,s):void i.attr("tabindex",-1)}).catch(function(){return _gpdc.Logger.log("Age gate failed on Image Block.")})})}}]),a}(),Y=function(){function a(t){e(this,a),this.$context=t}return t(a,[{key:"init",value:function(){var e=U(".media-block.media-block--bg",this.$context);e.length&&($.each(e,this.process.bind(this)),this.process(e),_gpdc.Logger.log("BG Block Plugin initialized!!"))}},{key:"process",value:function(e,t){var a=$(t);S(a,"gradient-theme",null,!0),S(a,"gradient-theme-tablet",null,!1,!0,!0)}}]),a}(),z=function(){function a(){e(this,a)}return t(a,[{key:"init",value:function(){var e=new Y,t=new K,a=new W,i=new F,n=new N;e.init(),t.init(),a.init(),i.init(),n.init()}}]),a}(),j=function(){function a(){e(this,a)}return t(a,[{key:"formatLinkLabel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?e.trim().replace(/\s+/g,"-").toLowerCase():l.EMPTY_LABEL}},{key:"addClickHandlerForTextBlocks",value:function(){var e=this,t=$(".text-block a, .title-block a, .stat-block a");$.each(t,function(t,a){var i=$(a);i.attr("dtm-position",t+1),i.on("click.DKTextBlocks",function(t){t.preventDefault(),e.logTextBlockDtmEvent(i).then(function(){_gpdc.analytics._satelliteTrack("select textblock link");var e=i.attr("href");"_blank"===i.attr("target")?window.open(e):window.location.href=e})})})}},{key:"logTextBlockDtmEvent",value:function(e){var t=this;return new Promise(function(a){var i=e.children("span:visible");_gpdc.analytics.event.addGDLEvent("click","select textblock link",{moduleName:"textblock",elementType:"link",assetName:l.EMPTY_LABEL,linkUrl:e.attr("href")||l.EMPTY_LABEL,label:t.formatLinkLabel(i.text()||e.text()),userActionFlag:!0,position:e.attr("dtm-position")},e),a()})}},{key:"init",value:function(){this.addClickHandlerForTextBlocks(),_gpdc.Logger.log("Text Block Tracker intialized!!")}}]),a}(),q=function(){function a(){e(this,a)}return t(a,[{key:"changeOlStartingPos",value:function(){var e=$(".text-block[data-ol-order-start]");$.each(e,function(e,t){var a=$(t).find("ol").eq(0),i=($(t).data("ol-order-start")||1)-1;a.css("counter-reset","item "+(i<-1?0:i))})}},{key:"init",value:function(){this.changeOlStartingPos();var e=new j;e.init()}}]),a}(),X=function(){function a(){e(this,a)}return t(a,[{key:"formatLinkLabel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.trim().replace(/\s+/g,"-").toLowerCase()||l.EMPTY_LABEL}},{key:"getDeviceUrlForSniffer",value:function(e){var t={};return e.replace(/([^#\/&=?]+)=([^?&=]+)/gi,function(e,a,i,n){t[a]=decodeURIComponent(i)}),t.cid&&(e=t.cid.match(/STORE-/)?m.consoleUrlPrefix.category:m.consoleUrlPrefix.product+t.cid),e}},{key:"updateUrlForBtnSniffer",value:function(e){var t=e.attr("href");(t.indexOf(m.oldStoreUrl)>-1||t.indexOf(m.newStoreUrl)>-1)&&e.attr({href:this.getDeviceUrlForSniffer(t),target:"_self"})}},{key:"updateButtonUrlForConsole",value:function(e){var t=((window._gpdc||{}).browser||{}).device||"";(t.match(/ps3/i)||t.match(/ps4/i)||t.match(/ps5/i))&&this.updateUrlForBtnSniffer(e)}},{key:"trackClick",value:function(e,t,a){if(e.data(p.DTM_IGNORE_EVENT))return void e.data(p.DTM_IGNORE_EVENT,!1);var i=e.attr("href")||"",n=e.data("sku")||null,o=t?e.data("media-block-src")||e.data("video-id"):"",s={moduleName:"buttonblock",elementType:"button",assetName:o||l.EMPTY_LABEL,linkUrl:i||l.EMPTY_LABEL,label:e.data("dtm-label"),userActionFlag:!(n||a||t),position:e.data("dtm-position")||e.data("btn-position")};n&&(s.sku=n);var r=a?"Purchase Intent":"select"+(n?" purchase":t?" video":"")+" button";_gpdc.analytics.event.addRawEvent(e,{eventName:r,eventAction:"click"},s)}},{key:"getButtonLabelText",value:function(e){var t=e.data("dtm-label-override");return t&&s.IS_TABLET?this.formatLinkLabel(t):this.formatLinkLabel(e.data("dtm-label"))}},{key:"addClickHandlerForButtonBlocks",value:function(){var e=this,t=$(m.btnLinkSelector);$.each(t,function(t,a){var i=$(a),n=e.getButtonLabelText(i);if(i.data({"btn-position":t+1,"dtm-label":n}),!i.is(m.btnVideoSelector)&&!i.is(m.btnAgeGateSelector)){_gpdc.analytics.commerce.updateStoreOrDirectLinkHref({},a,"buttonblock",n,!0);var o=i.attr("href")||"",s=o.indexOf(m.newStoreUrl)>-1||o.indexOf(m.pdcDirectUrl)>-1;i.on("click.DKButtonBlocks",function(t){return s&&"_blank"!==i.attr("target")?(t.preventDefault(),void setTimeout(function(){e.trackClick(i,!1,s),window.location.href=o},250)):void e.trackClick(i,!1,s)}),e.updateButtonUrlForConsole(i)}})}},{key:"addClickHandlerForWishlistBatarangBtn",value:function(){var e=$('button[data-qa="wishlistToggle"][data-track-click*=":addToWishlist"]');e.length&&$.each(e,function(e,t){var a=$(t);a.data({"btn-position":e+1,"dtm-label":"Add To Wishlist"}),a.on("click.pdcWishlist",function(){var e=a.data("telemetry-meta")||{},t=e.itemId;if(t){var i=digitalData.product.find(function(e){return e.productInfo.productID===t}),n=i?i.productInfo:null;if(n){var o={quantity:1,productName:n.productName,currencyCode:n.currency,sku:t};_gpdc.analytics.event.logCartAdd(a,o,"addtowishlist")}}})})}},{key:"init",value:function(){var e=this;this.addClickHandlerForButtonBlocks(),setTimeout(function(){return e.addClickHandlerForWishlistBatarangBtn()},700),_gpdc.Logger.log("Button Block Tracker intialized!!")}}]),a}(),Q=function(){function a(){e(this,a),this.WebCheckoutConstants=f,this.clientIdAttr=n.PREVIEW.test(location.href||"")?"data-preview-cid":n.WWWGLOBAL.test(location.href||"")?"data-wwwglobal-cid":"data-cid",this.$webCheckout=null,this.$webCheckoutWrapper=null,this.webCheckoutClientId=null,this.arkhamSessionAPIUrl="",this.displayClass=s.IS_MOBILE_PORTRAIT?"fadeInUpBig":"slideInRight",this.hideClass=(s.IS_MOBILE_PORTRAIT?"fadeOutUpBig":"slideOutRight")+" display--hidden"}return t(a,[{key:"appendQuery",value:function(e,t,a){return""+e+(e.indexOf("?")>-1?"&":"?")+t+"="+a}},{key:"toggleWebCheckout",value:function(e){var t=this,a=80;e?T(e,a).then(function(){t.$webCheckoutWrapper.removeClass(t.hideClass).addClass(t.displayClass),t.toggleCurtainClickHandler("on")}):T(e,a).then(function(){t.$webCheckoutWrapper.removeClass(t.displayClass).addClass(t.hideClass),t.toggleCurtainClickHandler("off")})}},{key:"toggleCurtainClickHandler",value:function(e){var t=this;$("#gdk__content .curtain")[e]("click.dkWebCheckout",function(){t.toggleWebCheckout(t.$webCheckoutWrapper.hasClass("display--hidden"))})}},{key:"attachWebCheckoutiFrame",value:function(e,t){var a=this;return new Promise(function(i,n){var o=window._gpdc.config||{},s=o.productFormattedLocale,r=a.WebCheckoutConstants.endpoint+"/buynow/"+e;if(a.$webCheckoutWrapper=$("#gdk__content .webcheckout__wrapper"),!window._gpdc)return void n("window._gpdc is not defined");var l=_gpdc.analytics.commerce.appendCIDs(r)||"",d=l.match(/emcid=([^&]+)/i)||"",c=l.match(/smcid=([^&]+)/i)||"";d&&(r=a.appendQuery(r,"emcid",d[1])),c&&(r=a.appendQuery(r,"smcid",c[1])),r=a.appendQuery(r,"privacy-policy","exempt"),r=a.appendQuery(r,"language",s||"en-US"),_gpdc.user.isLoggedIn&&(r=a.appendQuery(r,"age",_gpdc.user.age||"18")),r=a.appendQuery(r,"clientId",a.webCheckoutClientId),a.$webCheckout=a.$webCheckoutWrapper.find("iframe"),a.$webCheckout.attr("src")!==r&&(a.$webCheckoutWrapper.addClass(a.WebCheckoutConstants.loadingClass),a.$webCheckout.attr({src:""+r,"data-sku-id":e,"data-uuid":t})),i()})}},{key:"doPasswordVerification",value:function(){this.arkhamSessionAPIUrl||(this.arkhamSessionAPIUrl=this.WebCheckoutConstants.arkhamAPIHost+this.WebCheckoutConstants.arkhamAPIPath.replace("CURRENT_PAGE_URL",encodeURIComponent(window.location.href))),window.location.href=this.arkhamSessionAPIUrl}},{key:"onWindowMessage",value:function(e){var t=e.originalEvent,a=(h(t.data)||{}).action;return a?void(a===this.WebCheckoutConstants.loginAction?(_gpdc.Logger.log("Web Checkout - action to Login: ",a),this.userState.save(this.$webCheckout.data(p.COMPONENT_INSTANCE_ID_ATTR)),window._gpdc.config.doSignIn()):a===this.WebCheckoutConstants.pswrdVerifAction?(_gpdc.Logger.log("Web Checkout - action to Password Verification: ",a),this.userState.save(this.$webCheckout.data(p.COMPONENT_INSTANCE_ID_ATTR)),this.doPasswordVerification()):this.WebCheckoutConstants.closeActions.includes(a)?(this.toggleWebCheckout(!1),_gpdc.Logger.log("Web Checkout - action to close iFrame: ",a)):a===this.WebCheckoutConstants.loadedAction?(this.$webCheckoutWrapper.removeClass(this.WebCheckoutConstants.loadingClass),_gpdc.Logger.log("Web Checkout - action to remove iFrame loader: ",a)):_gpdc.Logger.log("Web Checkout - unhandled event action: ",a)):void _gpdc.Logger.log("Web Checkout - response does not contain valid/expected data object")}},{key:"displayFailSafe",value:function(e){var t=this.$webCheckoutWrapper.data("country-failsafe-text"),a=$('<div class="text-block failsafe-wrap"><p><a href="">'+t+"</a></p></div>");if(t){var i=window.location.href;"publish"===_gpdc.config.siteRunMode&&(i=i.replace(_gpdc.config.locale,(_gpdc.user.locale||"").toLowerCase())),a.find("a").attr("href",i),a.insertAfter(e.closest(".btn-block")),I(e.parent())}}},{key:"init",value:function(){var e=this,t=$("[data-sku]"),a=_gpdc.elements.$body.data("store-disabled");if(a||!t||!t.length)return!1;var i=new X,n=_gpdc.user.isLoggedIn&&(_gpdc.user.legalCountry||"").toLowerCase()!==window._gpdc.config.countryCode.toLowerCase();this.userState=new b,w("#webcheckout__wrapper-template").then(function(a){e.$webCheckoutWrapper=$("#gdk__content .webcheckout__wrapper"),e.webCheckoutClientId=e.$webCheckoutWrapper.attr(e.clientIdAttr),$.each(t,function(t,a){var o=$(a);return n?void e.displayFailSafe(o):void o.on("click.dkWebCheckout",function(t){t.stopPropagation(),t.stopImmediatePropagation();var a=$(t.currentTarget);e.attachWebCheckoutiFrame(a.data("sku"),a.data(p.COMPONENT_INSTANCE_ID_ATTR)).then(function(){return e.toggleWebCheckout(!0)}).catch(function(e){return _gpdc.Logger.log("WebCheckout failure: ",e)}),a.is(':not([class^="cta__"])')&&i.trackClick(a)})}),_gpdc.elements.$window.on("message.dkWebCheckout",e.onWindowMessage.bind(e))}).catch(function(){return _gpdc.Logger.warn("Unable to find webcheckout HTML Template!!")})}}]),a}(),J=function(){function a(){e(this,a)}return t(a,[{key:"init",value:function(){var e=$("[data-pxp-campaign]");if(!e||!e.length)return!1;var t=new b;$.each(e,function(e,a){var i=$(a),n=i.data("pxp-action")||"";if(n.includes("manualForceToComplete")){var o="PXP_TASK_"+e;n=n+","+o,i.attr({"data-pxp-action":n,id:o})}i.on("click.psexpClick",function(){return t.save(i.data(p.COMPONENT_INSTANCE_ID_ATTR))})}),_gpdc.Logger.log("Experience PlayStation initialized!!")}}]),a}(),Z=function(){function a(){e(this,a),this.$buttons=$(m.btnVideoSelector),this.buttonBlockTracker=new X,this.mediaLightBox=new R,this.ageGate=new P}return t(a,[{key:"onClick",value:function(e){e.preventDefault();var t=$(e.currentTarget),a=t.data(),i=a.videoDam,n=a.videoYoutube,o=a.lightboxTheme,s=void 0===o?"dark":o;t.data("component","video-block"),i?t.data("src",i):t.data("video-id",n),this.ageGate.isGated(t)||(this.mediaLightBox.openMediaLightbox("singleMedia",t,null,s),this.buttonBlockTracker.trackClick(t,!0))}},{key:"addEventListeners",value:function(e){e.on("click.dkVideoButtonClick",this.onClick.bind(this))}},{key:"init",value:function(){this.$buttons.length&&this.addEventListeners(this.$buttons)}}]),a}(),ee=function(){function a(){e(this,a),this.ageGate=new P}return t(a,[{key:"init",value:function(){var e=new Q,t=new J,a=new X,i=new Z;i.init(),e.init(),t.init(),a.init(),this.aemPatch(),this.applyAgeGate()}},{key:"applyAgeGate",value:function(){var e=this,t=$(m.btnBlockGated+", "+m.btnBlockGatedForce);t.on("click.dkBtnBlock",function(t){var a=$(t.currentTarget);e.ageGate.isGated(a)&&(t.preventDefault(),e.ageGate.triggerIfNeeded(a).then(function(){a[0].click()}).catch(function(){return _gpdc.Logger.log("Age gate failed on Button.");
}))})}},{key:"aemPatch",value:function(){var e=$(m.btnBlock);(e||e.length)&&$.each(e,function(e,t){var a=$(t),i=a.parent();if(i.hasClass("buttonblock")){var n=a.attr("class").split(/\s+/);$.each(n,function(e,t){t.includes("--auto")&&i.addClass(t)})}})}}]),a}(),te=function(){function a(){e(this,a),this.init()}return t(a,[{key:"setCustomWidths",value:function(e){var t="custom-"+e+"-width",a=$("[data-"+t+"]");$.each(a,function(e,a){var i=$(a).data(t);i!==!1&&$(a).get(0).style.setProperty("--"+t,i)})}},{key:"init",value:function(){this.setCustomWidths("mobile"),this.setCustomWidths("tablet"),this.setCustomWidths("desktop"),_gpdc.Logger.log("Blocks initialized")}}]),a}(),ae=function(){function a(){e(this,a),this.init()}return t(a,[{key:"removeNavFooter",value:function(){$("#sony-bar").remove(),$("#shared-nav-root").remove(),$("#jetstream-tertiary-nav").remove(),$(".gdk .site-footer").remove()}},{key:"addStickyBehavior",value:function(e,t){window.sharedNav&&window.sharedNav.makeSticky(t.length?t[0]:e[0])}},{key:"addTerNavAnchorsActiveLogic",value:function(e){var t=e.find('a.tertiary-tab__link[data-ps-anchor-link="true"]');$.each(t,function(t,a){$(a).on("click.pdcTertiaryNav",function(t){var a=t.currentTarget;e.find("a.tertiary-tab__link--active").removeClass("tertiary-tab__link--active"),$(a).addClass("tertiary-tab__link--active")})})}},{key:"init",value:function(){var e="hide"===sessionStorage.getItem(o.navFooter);if(e)return void this.removeNavFooter();var t=$("#shared-nav-container"),a=$("#jetstream-tertiary-nav");t&&t.length&&(this.addStickyBehavior(t,a),this.addTerNavAnchorsActiveLogic(a)),_gpdc.Logger.log("Jetstream Tertiary Nav module initialized!!")}}]),a}(),ie=function(){function a(){e(this,a)}return t(a,[{key:"addWaypointAnimation",value:function(e,t){if(s.IS_LANDSCAPE){var a=e.data("tablet-up-animation-class");if(!a)return;var i=new Waypoint({element:e.get(0),handler:function(){t.addClass(a),i.destroy()},offset:"90%"})}else{var n=e.data("mobile-animation-class");if(!n)return;$.each(t,function(e,t){var a=new Waypoint({element:t,handler:function(){$(t).addClass(n),a.destroy()},offset:"90%"})})}}},{key:"applyAnimations",value:function(e,t,a){var i=e.data("grid-animation-"+a)||"";if(i){if("tablet-up"===a){var n=e.data("grid-animation-delay-step")||.2,o=e.data("grid-animation-sequence")||"";$.each(t,function(e,a){var i="disabled"===o?0:"reversed"===o?t.length-e-1:e;$(a).css("--animation-delay",i*n+"s")})}e.data(a+"-animation-class",i)}}},{key:"processContentGrids",value:function(e){var t=this;$.each(e,function(e,a){var i=$(a),n=i.find('div[class^="box"]');t.applyAnimations(i,n,"mobile"),t.applyAnimations(i,n,"tablet-up"),t.addWaypointAnimation(i,n)})}},{key:"init",value:function(){var e=$(".content-grid");e.length&&this.processContentGrids(e),_gpdc.Logger.log("ContentGrid initialized!!")}}]),a}(),ne=function(){function a(){e(this,a),this.formMessage="form__message",this.input="input",this.inputItem=this.input+"__item",this.inputError=this.input+"__error",window._gpdc.components.form=this,this.init()}return t(a,[{key:"addInputItemHandlers",value:function(e){var t=this,a="input[type=text],input[type=number],input[type=email],input[type=password],select",i=this.inputItem,n="."+i,o=i+"--focused",s=i+"--filled";e.find(a).each(function(e,a){var i=$(a);""!==i.val()&&i.closest("."+t.inputItem).addClass(s)}).on("focus.dkInput",function(e){var t=e.currentTarget;$(t).closest(n).addClass(o)}).on("blur.dkInput",function(e){var t=e.currentTarget,a=$(t),i=a.closest(n),r=a.val();""===r?i.removeClass(s):i.addClass(s),i.removeClass(o)})}},{key:"addFormValidationHandlers",value:function(e){var t="."+this.input,a="."+this.inputError,i={errorsContainer:function(e){var i=e.$element.closest(t);if(i.length){var n=i.find(a);return n.empty(),n}return e}},n=this.inputItem,o="."+this.inputItem,s=n+"--success",r=n+"--error",l="[class$='server-validation-error']";e.parsley().destroy(),e.parsley(i).on("field:error",function(e){e.$element.closest(t).find(l).remove(),e.$element.closest(o).removeClass(s).addClass(r),e.$element.attr("aria-invalid","true")}).on("field:success",function(e){e.$element.closest(o).removeClass(r).addClass(s),e.$element.attr("aria-invalid","false")}).on("form:submit",function(t){var a=new X;return a.trackClick(e.find("[type=submit]")),!0})}},{key:"addTextAreaLetterCounter",value:function(e){var t="."+this.input;e.find("textarea").each(function(e,a){var i=$(a),n=i.closest(t).find(".current");i.on("keyup.dkInput",function(){n.text(i.val().length)})})}},{key:"init",value:function(){var e=this,t=$('[data-component="form"]');t&&t.length&&($.each(t,function(t,a){var i=$(a),n=i.data("bound")||!1;n||(e.addInputItemHandlers(i),e.addFormValidationHandlers(i),e.addTextAreaLetterCounter(i),i.data("bound",!0))}),_gpdc.Logger.log("Forms initialized!!"))}}]),a}(),oe=function(){function a(){e(this,a)}return t(a,[{key:"addEventListeners",value:function(e){var t=e,a=t.find(".form__view--1"),i=t.find(".form__view--2"),n=t.find(".form__view--3"),o=1200,s=new X;i.find(".input__field").on("click.dkForm",function(e){s.trackClick($(e.currentTarget)),t.submit()}),$(".input__item--icon-smile .input__field").on("click.dkForm",function(e){s.trackClick($(e.currentTarget)),t.submit()}),$(".input__item--icon-frown .input__field").on("click.dkForm",function(e){s.trackClick($(e.currentTarget)),i.fadeIn(o)}),t.on("submit.dkForm",function(e){e.preventDefault(),a.hide(),i.hide(),n.fadeIn(o)})}},{key:"init",value:function(){var e=this,t=$('[data-component="form-feedback"]');t.length&&($.each(t,function(t,a){var i=$(a);e.addEventListeners(i)}),_gpdc.Logger.log("Form feedback initialized!!"))}}]),a}(),se=function(){function a(){e(this,a),_gpdc.Logger.log("SearchBar initialized!!"),this.bind()}return t(a,[{key:"bind",value:function(){this._onFormSubmit=this._onFormSubmit.bind(this),this._onInputKeyUp=this._onInputKeyUp.bind(this),this._onInputFocus=this._onInputFocus.bind(this),this._onInputBlur=this._onInputBlur.bind(this),this._onSubmitClick=this._onSubmitClick.bind(this),this._onClearClick=this._onClearClick.bind(this)}},{key:"init",value:function(){var e="dkSearchBar",t=$(".search-bar__input");this.$form=$('[name="gdk-search-box"]'),this.$form.on("submit."+e,this._onFormSubmit),t.on("keyup."+e,this._onInputKeyUp).trigger("keyup."+e),t.on("focus."+e,this._onInputFocus),t.on("blur."+e,this._onInputBlur),t.data("bar-keyup-event-name","keyup."+e),$(".search-bar__submit").on("click."+e,this._onSubmitClick),$(".search-bar__clear").on("click."+e,this._onClearClick)}},{key:"_onInputFocus",value:function(e){this.$form.addClass("border--active")}},{key:"_onInputBlur",value:function(e){this.$form.removeClass("border--active")}},{key:"_onFormSubmit",value:function(e){var t=this.$form.attr("action");t&&location.pathname!==t||e.preventDefault()}},{key:"_onInputKeyUp",value:function(e){var t=e.currentTarget.value,a=$(e.currentTarget),i=a[0],n="search-bar__clear--active";i.$clear||(i.$clear=a.parent().find(".search-bar__clear")),t&&!i.$clear.hasClass(n)?i.$clear.addClass(n):!t&&i.$clear.hasClass(n)&&i.$clear.removeClass(n)}},{key:"_onSubmitClick",value:function(e){e.preventDefault(),$(e.currentTarget).closest("form").trigger("submit")}},{key:"_onClearClick",value:function(e){e.preventDefault();var t=$(e.currentTarget).removeClass("search-bar__clear--active").prevAll(".search-bar__input");t[0].cleared=!0,t.val(""),t.trigger("keydown")}}]),a}(),re=function(){function a(){e(this,a)}return t(a,[{key:"init",value:function(){var e=$('[data-component="cookie-launcher"]');return!(!e||!e.length)&&(e.on("click.dkCookie",function(){window.evidon&&window.evidon.notice.showOptions()}),void _gpdc.Logger.log("Cookie Launcher initialized!!"))}}]),a}(),le=function(){function a(){e(this,a)}return t(a,[{key:"init",value:function(){_gpdc.Logger.log("A11y initialized."),_gpdc.elements.$document.on("keydown.dkA11yEnter",'div[role="button"]',function(e){"Enter"===e.key?$(e.currentTarget).trigger("click"):" "===e.key&&(e.preventDefault(),$(e.currentTarget).trigger("click"))})}}]),a}(),de=function(){function a(){e(this,a),this.videoEqualsQueryParamRegex=new RegExp("video=")}return t(a,[{key:"autoloadVideo",value:function(e){var t=new URLSearchParams(e)||{},a=t.get("video"),i=$(".video-autoload-template"),n=i.find('[data-auto-load-query="'+a+'"]');if(n&&n.length){var o=new _gpdc.components.VideoButton;o.addEventListeners(i.find(m.btnVideoSelector)),n.click()}}},{key:"init",value:function(){var e=this,t=window.location&&window.location.search||"";t&&this.videoEqualsQueryParamRegex.test(t)&&(w("#video-autoload__template").then(function(a){e.autoloadVideo(t)}).catch(function(e){_gpdc.Logger.warn("Unable to find VideoAutoload HTML Template!!")}),_gpdc.Logger.log("VideoAutoload initialized!!"))}}]),a}(),ce=function(){function i(){e(this,i),this.ALERT_SHOW_DELAY=1e3,this.ALERT_COOKIE_PREFIX="pdcAlert",this.ALERT_COOKIE_TIMEOUT_OFFSET=6048e5,this.ALERT_PINNED_CLASS="pinned-top",this.fadeInAlertsWrapper=!1,this.$els={sonyBar:$("#sony-bar:not(.dk-nav__wrapper)"),tertiary:$("#jetstream-tertiary-nav .tertiary-container")}}return t(i,[{key:"init",value:function(){var e=this,t=$('[data-component="alerts"]');if(t.length){this.hashAnchor=new a;var i=t.eq(0),n=i.find(".alerts__item");i.css("--alert-top",this.hashAnchor.calculateNavigationOffset()+this.getSonyBarOffset()+"px"),i.css("--alert-top-pinned",this.$els.tertiary.length||!r.IS_JETSTREAM_MOBILE?"64px":"60px"),$.each(n,function(t,a){return e.processAlerts(i,$(a),t)}),this.fadeInAlertsWrapper&&setTimeout(function(){i.addClass("in"),$.each(n,function(t,a){return e.trackAlertEvent($(a),"impression","alert impression","image")})},this.ALERT_SHOW_DELAY),_gpdc.Logger.log("Alerts initialized!!")}}},{key:"processAlerts",value:function(e,t,a){return this.shouldDisplayAlert(t)?(this.fadeInAlertsWrapper=!0,t.data("analytics-position",a+1),this.pinAlertToTop(e),void this.addListeners(e,t)):void t.remove()}},{key:"shouldDisplayAlert",value:function(e){var t=u(this.ALERT_COOKIE_PREFIX+(e.data("alert-id")||""));if(t)return!1;var a=new Date((new Date).toUTCString()).getTime(),i=e.data("start-time"),n=e.data("end-time");return i&&n&&i<a&&n>a}},{key:"addListeners",value:function(e,t){var a=this,i=t.find(".alerts__item__collapsable"),n=t.find(".alerts__item__link"),o=t.find(".alerts__item__close");_gpdc.elements.$window.scroll(function(){return a.pinAlertToTop(e)}),r.IS_LAPTOP||i.on("click.dkAlertsExpand",function(e){var t=e.currentTarget,i=$(t),n=i.parent();n.toggleClass("collapsed"),n.hasClass("collapsed")||a.trackAlertEvent(i,"click","expand alert","image")}),o.on("click.dkAlertsClose",function(e){var t=e.currentTarget,i=$(t);a.persistAlertDismissal(i),a.trackAlertEvent(i,"click","close alert","button")}),n.length&&n.on("click.dkAlertsLink",function(e){e.preventDefault();var t=$(e.currentTarget),i=t.attr("href");i&&"javascript:void(0);"!==i&&(a.persistAlertDismissal(t),window.open(i,"_blank")),a.trackAlertEvent(t,"click","select alert link","link")})}},{key:"pinAlertToTop",value:function(e){e[_gpdc.elements.$window.scrollTop()>0?"addClass":"removeClass"](this.ALERT_PINNED_CLASS)}},{key:"persistAlertDismissal",value:function(e){var t=e.closest(".alerts__item"),a=t.data("alert-id")||"",i=t.data("end-time")+this.ALERT_COOKIE_TIMEOUT_OFFSET,n=Math.floor((i-(new Date).getTime())/6e4);t.remove(),a&&c(this.ALERT_COOKIE_PREFIX+a,"dismissed",n)}},{key:"getSonyBarOffset",value:function(){return this.$els.sonyBar.length&&!r.IS_JETSTREAM_MOBILE?this.$els.sonyBar.outerHeight():0}},{key:"trackAlertEvent",value:function(e,t,a,i){_gpdc.analytics.event.addGDLEvent(t,a,{userActionFlag:"click"===t,moduleName:"alert",label:e.data("analytics-label")||l.EMPTY_LABEL,position:e.data("analytics-position"),linkUrl:l.EMPTY_LABEL,assetName:l.EMPTY_LABEL,elementType:i},e)}}]),i}(),ue=function(){function a(){e(this,a),this.activeSlideId=0,this.rotateInterval=null,this.keepRotation=!1,this.$slider=null,this.$controlsWrapper=null,this.$controls=null,this.$slides=null,this.isAutoRotationEnabled=null,this.displayHidden="display--hidden",this.autoRotateEventDataAttr="auto-rotate-event",this.bannersTracked=[]}return t(a,[{key:"init",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&e.length?(this.$slider=e,this.$controlsWrapper=this.$slider.find(".slider__controls"),this.$controls=this.$slider.find(".slider__control"),this.$slides=this.$slider.find(".slider__slide"),this.componentType=this.$slider.data("component"),this.isAutoRotationEnabled=this.$slider.data("auto-rotate"),this.options=a,this.addEventHandlers(),this.setControlsHeight(),this.isAutoRotationEnabled&&(this.keepRotation=!0,this.configureAutoRotate()),this.options.impressionCallback&&setTimeout(function(){t.options.impressionCallback(t.$slides.eq(0),1)},200),void _gpdc.Logger.log("Slider initialized!!")):void _gpdc.Logger.log("Invalid params, Slider not initialized!")}},{key:"addEventHandlers",value:function(){var e=this;this.$controlsWrapper.on("change.flickity",this.updateSlide.bind(this)),this.$controls.on("click.dkSliderControlClick",function(t){var a=t.currentTarget;return e.updateSlide($(a))}),this.$controls.hover(function(t){var a=t.currentTarget;s.IS_TABLET&&e.$controls.not($(a)).find("figure").addClass("not-hovered")},function(){s.IS_TABLET&&e.$controls.find("figure").removeClass("not-hovered")})}},{key:"setControlsHeight",value:function(){var e=this;s.IS_DESKTOP||(this.$slider.css("--controls-wrapper-height",this.$controlsWrapper.outerHeight()),_gpdc.elements.$window.on("resize.slider",function(){return e.$slider.css("--controls-wrapper-height",e.$controlsWrapper.outerHeight())}))}},{key:"configureAutoRotate",value:function(){var e=this;setTimeout(function(){e.keepRotation&&(e.$slider.data(e.autoRotateEventDataAttr,!0),e.triggerUpdateSlide(),e.rotateInterval=setInterval(function(){e.$slider.data(e.autoRotateEventDataAttr,!0),e.triggerUpdateSlide()},e.$slider.data("other-slides-display-time")||3e3))},this.$slider.data("first-slide-display-time")||6e3)}},{key:"triggerUpdateSlide",value:function(){this.activeSlideId++,this.activeSlideId>this.$controls.length&&(this.activeSlideId=1),this.$controlsWrapper.hasClass("flickity-enabled")?this.$controlsWrapper.flickity("select",this.activeSlideId-1,!0,!1):this.$controls.filter('[data-control-id="'+this.activeSlideId+'"]').click()}},{key:"updateSlide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.keepRotation=this.clearAutoRotatation();var t=e.length?e:this.$controls.filter(".is-selected"),a=t.data("control-id"),i=this.$slider.find("[data-slide-id='"+a+"']");if(s.IS_MOBILE&&this.$controls.closest(".slider__controls.carousel").flickity("selectCell",a-1),this.activeSlideId=a,this.$controls.removeClass("is-selected"),t.addClass("is-selected"),this.$slides.not("."+this.displayHidden).addClass(this.displayHidden),i.removeClass(this.displayHidden),i.find('[data-carousel="true"]').flickity("resize"),this.$slider.hasClass("product-picker")){var n="div[class*=slider__control--]";this.$controls.find(n).removeClass("is-selected"),t.find(n).addClass("is-selected")}"hp-hero"==this.componentType&&this.options.impressionCallback(i,a,this.bannersTracked,0),"featured-hardware"===this.componentType&&this.options.clickCallback(i,t),"image-comparison-slider-gallery"===this.componentType&&this.options.clickCallback(i,t)}},{key:"clearAutoRotatation",value:function(){var e=this.$slider.data(this.autoRotateEventDataAttr);return e?(this.$slider.data(this.autoRotateEventDataAttr,!1),!0):!(!this.isAutoRotationEnabled||e)&&(clearInterval(this.rotateInterval),!1)}}]),a}(),ge=function(){function a(){e(this,a),_gpdc.Logger.log("Pagination initialized!!")}return t(a,[{key:"api",value:function(e){var t=$(this),a=t.data("pages");if("select"===e){for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];var s=n[0];if(t[0].$blips.removeClass("pagination__blip--active"),t.find('[data-page="'+s+'"]').addClass("pagination__blip--active"),s>=9&&t[0].pages>9&&s<t[0].pages-1){var r=Math.abs(9-s);t[0].$slider.css("transform","translateX(calc(((var(--blip-width) * "+(r+1)+") + (var(--blip-gap) * "+(r+1)+")) * -1))")}else s<9?t[0].$slider.css("transform","translateX(0)"):s===a&&t[0].$slider.css("transform","translateX(calc(((var(--blip-width) * "+(s-10)+") + (var(--blip-gap) * "+(s-10)+")) * -1))")}}},{key:"initPaginator",value:function(e,t){var a=$(t),i=a.data("pages");a[0].pagination=this.api.bind(t),a[0].pages=i,a[0].$blips=a.find(".pagination__blip"),a[0].$slider=a.find(".pagination__slider"),a[0].$blips.on("click.dkPagination",function(e){var t=$(e.currentTarget);if(t.attr("href"));else{e.preventDefault(),a[0].$blips.removeClass("pagination__blip--active"),t.addClass("pagination__blip--active");var n=t.data(),o=n.page;if(a.trigger("change.dkPagination",[o,e]),o>=9&&i>9&&o<i-1){var s=Math.abs(9-o);a[0].$slider.css("transform","translateX(calc(((var(--blip-width) * "+(s+1)+") + (var(--blip-gap) * "+(s+1)+")) * -1))")}else o<9?a[0].$slider.css("transform","translateX(0)"):o===i&&a[0].$slider.css("transform","translateX(calc(((var(--blip-width) * "+(o-10)+") + (var(--blip-gap) * "+(o-10)+")) * -1))")}}),a[0].$blips.filter(".pagination__blip--active").trigger("click")}},{key:"init",value:function(){var e=$('[data-component="pagination"]');e.length&&e.each(this.initPaginator.bind(this))}}]),a}(),he=function(){function i(){e(this,i),this.hashAnchor=new a}return t(i,[{key:"positionActiveTab",value:function(e,t){var a=parseInt(t.css("width")),i=parseInt(_gpdc.elements.$body.css("width")),n=parseInt(e.css("padding-right")),o=t.offset().left,s=t.position().left,r={left:n,right:i-n};o<r.left?e.animate({scrollLeft:s},100):o+a>r.right&&e.animate({scrollLeft:s+a-(i-n-n)},100)}},{key:"addListeners",value:function(e){var t=this,a=$('div[data-component="pills"]');this.stickyPillsInstance={},a.each(function(a,i){var n=$(i);if(n.find(".pills__item").on("click.dkPillsClik",function(e){var a=$(e.currentTarget);a.hasClass("pills__item--active")||(n.trigger("change.dkPills",[a,e]),a.addClass("pills__item--active").trigger("blur").siblings().removeClass("pills__item--active"),t.positionActiveTab(n,a))}),n.data("sticky")){var o=n.data("sticky-limit-elm"),s=o?$(o):[];t.initSticky(n,s,e,a,!0)}})}},{key:"initSticky",value:function(e,t,a,i,n){var o=this;this.stickyPillsInstance[i]=new Waypoint.Sticky({element:e[0],stuckClass:"isSticky",offset:a,handler:function(){return e.css("--sticky-top",a+"px")}}),n&&t.length&&setTimeout(function(){new Waypoint({element:t[0],offset:e.outerHeight()+a,handler:function(n){"down"===n?o.stickyPillsInstance[i].destroy():setTimeout(function(){o.initSticky(e,t,a,i,!1)},0)}})},500)}},{key:"init",value:function(){var e=this.hashAnchor.calculateNavigationOffset();this.addListeners(e),_gpdc.Logger.log("Pills initialized!!")}}]),i}(),pe=function(){function a(){e(this,a),this.selectors={component:'[data-component="exclusive-badge"]',targetId:"legal-text-target-id",legalText:"data-exclusive-badge-id",expiration:"expiration",legalMessage:"legal-message",dateToken:":expirationDate"}}return t(a,[{key:"init",value:function(){var e=$(this.selectors.component);e.length&&($.each(e,this.processExclusiveBadge.bind(this)),_gpdc.Logger.log("ExclusiveBadge initialized!!"))}},{key:"processExclusiveBadge",value:function(e,t){var a=$(t),i=a.data(this.selectors.targetId)||"",n=a.data(this.selectors.expiration)||"",o=a.data(this.selectors.legalMessage)||"",s=i?_gpdc.elements.$body.find("["+this.selectors.legalText+'="'+i+'"]'):[];return s.length&&o?(o.includes(this.selectors.dateToken)&&(o=o.replace(this.selectors.dateToken,n)),void s.html(o)):void _gpdc.Logger.log("Exclusive Badge | Either No matching legal text wrapper found or no legal message authored")}}]),a}(),ve=function(){function a(){e(this,a),this.init()}return t(a,[{key:"initModules",value:function(){_gpdc.Logger.groupStart("Components");var e=new z,t=(new R,new D),a=new ie,i=new q,n=new P,o=new ee,s=(new te,new ne),r=new oe,l=new se,d=new re,c=new de,u=new b,g=new le,h=new ce,p=new ge,v=new he,f=new pe;p.init(),v.init(),n.init(),a.init(),i.init(),o.init(),s.init(),r.init(),l.init(),d.init(),e.init(),t.init(),c.init(),g.init(),h.init(),f.init(),u.retrieve(),n.updateSignInLink("body"),_gpdc.Logger.groupEnd()}},{key:"init",value:function(){var e=this,t=new ae;t.init(),_gpdc.components.AgeGate=P,_gpdc.components.BGBlock=Y,_gpdc.components.InlineVideo=F,_gpdc.components.VideoBlock=W,_gpdc.components.VideoButton=Z,_gpdc.components.YTEmbedVideo=N,_gpdc.components.VideoPlayer=M,_gpdc.components.Carousel=D,_gpdc.components.Slider=ue,window._gpdc&&_gpdc.user&&"undefined"!=typeof _gpdc.user.isLoggedIn?this.initModules():_gpdc.elements.$document.one("userInfoSet.dkComponents",function(){return e.initModules()})}}]),a}(),fe=function(){function a(){e(this,a),this.cookie=i,this.init()}return t(a,[{key:"setEvidonCookie",value:function(e){c(this.cookie.LABELS.EU_COOKIE,e,this.cookie.COOKIE_AGE,this.cookie.DOMAIN)}},{key:"setConsent",value:function(e){this.setEvidonCookie(e);var t=new CustomEvent("evidonConsentState",{detail:{consent:e},bubbles:!0,cancelable:!0});document.dispatchEvent(t)}},{key:"init",value:function(){var e=this;window.evidon&&(window.evidon.launchConsentAccepted=function(){e.setConsent(e.cookie.LABELS.PREFERENCE_ACCEPT),_gpdc.Logger.log("Evidon launchConsentAccepted called!!")},window.evidon.launchConsentWithdrawn=function(){e.setConsent(e.cookie.LABELS.PREFERENCE_REJECT),_gpdc.Logger.log("Evidon launchConsentWithdrawn called!!")},window.evidon.launchConsentDeclined=function(){e.setConsent(e.cookie.LABELS.PREFERENCE_REJECT),_gpdc.Logger.log("Evidon launchConsentDeclined called!!")},_gpdc.Logger.log("Evidon initialized!!"))}}]),a}();!function(e){var t=window;t.sharedNav&&sharedNav.setPublicUrl&&t.sharedNav.setPublicUrl("/etc.clientlibs/global_pdc/clientlibs/clientlibs-jetstream/resources"),_gpdc.components={},_gpdc.elements.$document.ready(function(){t._dkDebug=!1,_gpdc.Logger.groupStart("Core");var e=new a;new ve,new fe,new d;e.bind(),e.init(),_gpdc.Logger.groupEnd()})}(jQuery)}();
