(window.pswCommerceAnywhere=window.pswCommerceAnywhere||[]).push([[6],{217:function(e,t,r){"use strict";r.r(t);var n=r(32),o=r(29),c=r.n(o),i=r(5),a=r.n(i),d=r(0),s=r(242),u=r(243),l=r(262),p=r(244),g=r(245),O=r(246),f=r(247),y=r(226),m=r(140),v=r(248),b=r(11),P=r(249),h=r(13),j=r.n(h),w=r(12);function T(){var e=j()(["\nfragment addOnProduct on Product {\n  id\n  boxArt {\n    url\n    altText\n  }\n  platforms\n  name\n  skus {\n    type\n  }\n  storeDisplayClassification\n  localizedStoreDisplayClassification\n  price {\n    discountedPrice\n    discountText\n    isExclusive\n    upsellText\n    upsellServiceBranding\n    serviceBranding\n    basePrice\n    isFree\n    isTiedToSubscription\n  }\n}"]);return T=function(){return e},e}var I=Object(w.gql)(T());function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(){var e=j()(["\nquery getAddOnProductsByProductId($productId: ID!, $pageArgs: PageArgs) {\n  addOnProductsByProductIdRetrieve(productId: $productId, pageArgs: $pageArgs) {\n    addOnProducts {\n      ...addOnProduct\n    }\n  }\n}\n","\n"]);return x=function(){return e},e}var k=Object(w.gql)(x(),I),C=function(e){var t=e.productId,r=e.options,n=e.pageArgs;return A(A({},r),{},{query:k,variables:{productId:t,pageArgs:n}})};function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(){var e=j()(["\nquery getAddOnProductsByConcept($conceptId: ID!, $pageArgs: PageArgs) {\n  addOnProductsRetrieve(conceptId: $conceptId, pageArgs: $pageArgs) {\n    addOnProducts {\n      ...addOnProduct\n    }\n  }\n}\n","\n"]);return _=function(){return e},e}var N=Object(w.gql)(_(),I),U=function(e){var t=e.conceptId,r=e.options,n=e.pageArgs;return D(D({},r),{},{query:N,variables:{conceptId:t,pageArgs:n}})},B=r(56),R=function(e){return/[0-9]/.test(e.discountText)?e.discountText:void 0},q=function(e){return"PREORDER"===Object(B.a)(e,"skus.0.type")},L=function(e){return q(e)?"PREORDER":e.storeDisplayClassification},$=function(e){switch(e){case"Add_on_pack":return"gotham:msgid_add_on";case"Exclusive":return"gotham:msgid_exclusive";case"Pre-Order":return"gotham:msgid_pre_order";case"Trial":return"gotham:msgid_trial";case"Beta":return"gotham:msgid_beta";case"Demo":return"gotham:msgid_demo";default:return}},z=function(e){var t=e.price||{}||{},r=t.discountedPrice,n=t.discountText,o=t.isExclusive,c=t.upsellText,i=t.upsellServiceBranding,a=/[1-9]/.test(r),d=o&&!n&&a?$("Exclusive"):null,s=c||d?i:void 0;return{serviceType:s&&s[0],descriptorText:$(L(e))||c||d||""}},M=function(e){var t=e.price||{},r=(t||{}).serviceBranding,n=R(t),o=n?r:void 0;return{serviceType:o&&o[0],text:n}},F=function(e){var t=e.price||{},r=t||{},n=r.basePrice,o=r.discountedPrice,c=r.isExclusive,i=r.isFree,a=r.serviceBranding,d=r.isTiedToSubscription,s=z(e),u=R(t),l=s.text||u?void 0:a,p=e.__typename,g=void 0===p?"":p,O=e.products,f=void 0===O?[]:O,y="CONCEPT"===g.toUpperCase()&&0===f.length;return{type:e.__typename.toUpperCase(),base:n,discount:o,serviceType:l&&l[0],isFree:i,isExclusive:c,isTiedToSubscription:d,text:y?"msgid_announced":""}},V=function(e){return{type:e.__typename.toUpperCase(),gameArt:{src:e.boxArt.url,alt:e.boxArt.altText,platformTags:{platformNames:e.platforms}},productId:e.id,productName:e.name,productType:L(e),productTypeText:(t=e,q(t)?"Pre-Order":t.localizedStoreDisplayClassification),serviceUpsell:z(e),discountBadge:M(e),price:F(e)};var t},J=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.locale,n=t.productId,o=t.productUrlSchema;return null==o||null===(e=o.replace("{productId}",n))||void 0===e?void 0:e.replace("{locale}",r)},G=function(e){var t,r,n,o,c=e.response,i=e.cultureCode,a=e.productUrlSchema,d=(null==c||null===(t=c.data)||void 0===t||null===(r=t.addOnProductsByProductIdRetrieve)||void 0===r?void 0:r.addOnProducts)||(null==c||null===(n=c.data)||void 0===n||null===(o=n.addOnProductsRetrieve)||void 0===o?void 0:o.addOnProducts)||[];return{productTileLinks:d.map((function(e){return{href:J({productId:e.id,locale:i.toString().toLowerCase(),productUrlSchema:a}),productTile:V(e)}})),isEmpty:0===d.length}},Q=function(e){var t=e.context,r=e.apolloClient,n=e.cultureCode,o=e.productUrlSchema,c=t.conceptId,i=t.productId,a=c?U:C;return{fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,d=e.pageArgs;return r.query(a({conceptId:c,productId:i,options:t,pageArgs:d})).then((function(e){return G({response:e,cultureCode:n,productUrlSchema:o})}))},get:function(e){var t,c=e.size;try{t=r.readQuery(a({productId:i,pageArgs:{size:c}}),!0)}catch(e){return console.log("ERROR",e),null}return G({response:{data:t},cultureCode:n,productUrlSchema:o})}}};function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var K=function(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{addOnsOverlay:{make:function(e){return{ui:"AddOnsOverlay",layer:"dialog",scrim:"top",children:e.children,header:e.header}}}})};function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var X=function(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},K())},Y=r(42);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var te=function(e){var t=e.parentProductId,r=e.parentConceptId,n=e.productTileLinks,o=e.format;return n.map((function(e,n){var i=e.href,a=e.productTile;return d.g.createElement(s.a,{variant:"content",href:i,dataTrack:Object(Y.c)({eventName:"click add-on tile",moduleName:"add ons",label:"add on tile",elementType:"link",userActionFlag:!0}),dataTrackClick:"addOns:addOnTileClick",telemetryMeta:JSON.stringify({productId:t,conceptId:r,tile:{productId:a.productId}})},d.g.createElement(u.a,{qa:"add-ons-grid#".concat(n),type:a.type,gameArt:d.g.createElement(l.a,{src:a.gameArt.src,alt:a.gameArt.alt,platformTags:d.g.createElement(p.a,{platformNames:a.gameArt.platformTags.platformNames})}),productName:a.productName,productType:a.productType,productTypeText:a.productTypeText,serviceUpsell:d.g.createElement(g.a,{serviceType:a.serviceUpsell.serviceType,descriptorText:o("string",a.serviceUpsell.descriptorText)}),discountBadge:d.g.createElement(O.a,a.discountBadge),price:d.g.createElement(f.a,c()({},ee(ee({},a.price),{},{text:o("string",a.price.text)}),{format:o}))}))}))};Object(n.default)("addOns",(function(e){var t,r,n,o,c,i,a,s=e.app,u=e.args,l=e.render;return{name:"addOns",core:(t={app:s,context:u},r=t.context,n=void 0===r?{}:r,o=t.app,c=o.apolloClient,i=o.i18n.cultureCode,a=o.config,{addOns:Q({context:n,apolloClient:c,cultureCode:i,productUrlSchema:a.get("client.productUrlSchema")})}),init:function(){!function(e){!function(e){e.telemetry.addSpec("addOns",{"click:viewAllAddOns":{make:function(){return{type:"Interaction",payload:{interactCta:"view all add-ons",interactAction:"click view all add-ons"}}}},"click:addOnTileClick":{make:function(e){return{type:"Interaction",payload:{interactCta:"add-on tile",interactAction:"click add-on tile",visualEntityType:"GAME_TILE"},utData:{catalogInfo:{productId:e.tile.productId}}}}}})}({telemetry:e.telemetry})}({telemetry:s.telemetry}),s.addComponent("AddOnsOverlay",v.a),s.layers.addLayerItemTypes(X())},getInitialProps:function(){return this.core.addOns.fetch({options:{fetchPolicy:s.session.isUserSignedIn()?"network-only":"cache-first"},pageArgs:{size:48}})},onViewMore:function(e){var t,r,n,o=s.i18n.format;s.layers.show({type:"addOnsOverlay",children:(n=te({productTileLinks:e,format:o}),d.g.createElement(y.a,{className:"psw-l-gap-y-6"},n)),header:(t=o("string","msgid_add_ons"),r=o("string","msgid_sr_close"),d.g.createElement(m.a,{closeLabel:r},t))})},isEmpty:function(){var e;return null===(e=this.core.addOns.get({size:48}))||void 0===e?void 0:e.isEmpty},render:function(e){var t=this,r=s.i18n.format,n=e.productTileLinks,o=void 0===n?[]:n;return o.length>0?l(d.g.createElement("div",null,d.g.createElement("h2",{"data-qa":"add-ons-title",className:Object(b.b)("psw-t-title-l","psw-t-align-c","psw-m-b-9")},r("string","msgid_add_ons")),d.g.createElement(P.a,{qa:"add-ons",gridClassName:"psw-l-gap-y-6",previewSize:"s",viewMoreLabel:r("string","msgid_view_more"),onViewMore:function(){return t.onViewMore(o)},dataTrack:Object(Y.c)({eventName:"view all add ons",moduleName:"add ons",label:"view all",elementType:"button",userActionFlag:!0}),telemetryMeta:JSON.stringify({productId:u.productId,conceptId:u.conceptId}),trackClick:"addOns:viewAllAddOns"},te({parentProductId:u.productId,parentConceptId:u.conceptId,productTileLinks:o,format:r})),d.g.createElement("style",{global:!0,jsx:!0},"\n          .psw-root .psw-content-link {\n            outline: none !important;\n            box-shadow: none !important;\n          }\n        "))):l(null)}}}))}},[[217,2,1,3,4,5,0]]]);