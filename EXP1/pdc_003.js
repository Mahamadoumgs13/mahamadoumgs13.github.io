/*!
 * @sie/designkit
 * @copyright     2021 Sony Interactive Entertainment LLC, all rights reserved
 */

!function(){"use strict";var t=({IS_PORTRAIT:(window.matchMedia&&matchMedia("(orientation: portrait)")||{}).matches,IS_LANDSCAPE:(window.matchMedia&&matchMedia("(orientation: landscape)")||{}).matches,IS_MOBILE:(window.matchMedia&&matchMedia("(max-width: 767px)")||{}).matches,IS_MOBILE_PORTRAIT:(window.matchMedia("(max-width: 767px) and (orientation: portrait)")||{}).matches,IS_TABLET:(window.matchMedia&&matchMedia("(min-width: 768px)")||{}).matches,IS_DESKTOP:(window.matchMedia&&matchMedia("(min-width: 1024px)")||{}).matches},{IS_PORTRAIT:(window.matchMedia&&matchMedia("(orientation: portrait)")||{}).matches,IS_LANDSCAPE:(window.matchMedia&&matchMedia("(orientation: landscape)")||{}).matches,IS_JETSTREAM_MOBILE:(window.matchMedia&&matchMedia("(max-width: 699px)")||{}).matches,IS_MOBILE:(window.matchMedia&&matchMedia("(max-width: 767px)")||{}).matches,IS_MOBILE_PORTRAIT:(window.matchMedia("(max-width: 767px) and (orientation: portrait)")||{}).matches,IS_TABLET:(window.matchMedia&&matchMedia("(min-width: 768px)")||{}).matches,IS_TABLET_LG:(window.matchMedia&&matchMedia("(min-width: 1024px)")||{}).matches,IS_LAPTOP:(window.matchMedia&&matchMedia("(min-width: 1367px)")||{}).matches,IS_DESKTOP:(window.matchMedia&&matchMedia("(min-width: 1920px)")||{}).matches},{EMPTY_LABEL:"empty"}),e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),a=function(){function a(t){e(this,a),this.$context=t,this.selector='div[data-component="accordion"], div[data-component="accordion-expandable-content"], div[data-component="accordion__hero"]'}return i(a,[{key:"triggerAccordion",value:function(t,e){var i=this,a=t.children("div:not(.accordion__item-title)"),n=t.find(".accordion__item-title"),o=t.find(".accordion__item-description"),c=n.find(".chevron"),d=e.data("item-open"),r=e.data("item-closed"),s=e.find(".link"),l=e.data("dtm-label")||s.text(),m=e.next(),h=n.index(e)+1,p=t.data("aria-label-down");if(e.hasClass("active"))m.slideUp("300",function(){if(e.attr("aria-expanded","false").removeClass("active"),a.length&&e.parent().removeClass("active-wrapper"),c.length){var n=e.find(".chevron");n.toggleClass("chevron-up"),r&&s.text(r),n.find("svg").first().attr("aria-label",p)}i.logAccordionDtmEvent(t,l,h,"close")});else{if(c.length){c.removeClass("chevron-up"),$.each(c,function(t,e){$(e).find("svg").first().attr("aria-label",p)});var u=e.find(".chevron");u.toggleClass("chevron-up"),u.find("svg").first().attr("aria-label",t.data("aria-label-up"))}o.slideUp("300").promise().done(function(){var o=n.filter(".active"),c=o.find(".link"),r=o.data("dtm-label")||c.text(),p=n.index(o)+1,u=o.data("item-closed");o&&o.length&&(u&&c.text(u),i.logAccordionDtmEvent(t,r,p,"close")),n.attr("aria-expanded","false").removeClass("active"),e.attr("aria-expanded","true").addClass("active"),a.length&&(a.removeClass("active-wrapper"),e.parent().addClass("active-wrapper")),d&&s.text(d),m.slideDown("300",function(){i.logAccordionDtmEvent(t,l,h,"open")})})}}},{key:"findAccordions",value:function(){return this.$context&&this.$context.find(this.selector),$(this.selector)}},{key:"addClickHandlerForAccordions",value:function(){var t=this,e=this.findAccordions();e&&e.length&&$.each(e,function(e,i){var a=$(i),n=a.find(".accordion__item-title").filter(function(e,i){return $(i).closest(t.selector).is(a)});n.on("click.dkAccordion",function(e){var i=e.currentTarget;t.triggerAccordion(a,$(i))})})}},{key:"logAccordionDtmEvent",value:function(e,i,a,n){_gpdc.analytics.event.addGDLEvent("click",n+" accordion",{moduleName:"accordion",elementType:"button",assetName:t.EMPTY_LABEL,linkUrl:t.EMPTY_LABEL,label:i,userActionFlag:!0,position:1},e)}},{key:"init",value:function(){this.addClickHandlerForAccordions(),_gpdc.Logger.log("Accordions initialized!!")}}]),a}(),n=function(){function t(){var i=this;e(this,t),_gpdc.components.Accordion=a,window._gpdc&&_gpdc.user&&"undefined"!=typeof _gpdc.user.isLoggedIn?this.initModules():_gpdc.elements.$document.one("userInfoSet.dkComponents",function(){return i.initModules()})}return i(t,[{key:"initModules",value:function(){_gpdc.Logger.groupStart("Components");var t=new a;t.init(),_gpdc.Logger.groupEnd()}}]),t}();!function(t){_gpdc.elements.$document.ready(function(){window._dkDebug=!1,_gpdc.Logger.groupStart("Accordion");new n;_gpdc.Logger.groupEnd()})}(jQuery)}();
